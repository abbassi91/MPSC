{"ast":null,"code":";\n\n(function () {\n  var UTIF = {}; // Make available for import by `require()`\n\n  if (typeof module == \"object\") {\n    module.exports = UTIF;\n  } else {\n    self.UTIF = UTIF;\n  }\n\n  var pako;\n\n  if (typeof require == \"function\") {\n    pako = require(\"pako\");\n  } else {\n    pako = self.pako;\n  }\n\n  function log() {\n    if (typeof process == \"undefined\" || process.env.NODE_ENV == \"development\") console.log.apply(console, arguments);\n  }\n\n  (function (UTIF, pako) {\n    // Following lines add a JPEG decoder  to UTIF.JpegDecoder\n    (function () {\n      var V = \"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator ? function (g) {\n        return typeof g;\n      } : function (g) {\n        return g && \"function\" === typeof Symbol && g.constructor === Symbol && g !== Symbol.prototype ? \"symbol\" : typeof g;\n      },\n          D = function () {\n        function g(g) {\n          this.message = \"JPEG error: \" + g;\n        }\n\n        g.prototype = Error();\n        g.prototype.name = \"JpegError\";\n        return g.constructor = g;\n      }(),\n          P = function () {\n        function g(g, D) {\n          this.message = g;\n          this.g = D;\n        }\n\n        g.prototype = Error();\n        g.prototype.name = \"DNLMarkerError\";\n        return g.constructor = g;\n      }();\n\n      (function () {\n        function g() {\n          this.M = null;\n          this.B = -1;\n        }\n\n        function W(a, d) {\n          for (var f = 0, e = [], b, B, k = 16; 0 < k && !a[k - 1];) k--;\n\n          e.push({\n            children: [],\n            index: 0\n          });\n          var l = e[0],\n              r;\n\n          for (b = 0; b < k; b++) {\n            for (B = 0; B < a[b]; B++) {\n              l = e.pop();\n\n              for (l.children[l.index] = d[f]; 0 < l.index;) l = e.pop();\n\n              l.index++;\n\n              for (e.push(l); e.length <= b;) e.push(r = {\n                children: [],\n                index: 0\n              }), l.children[l.index] = r.children, l = r;\n\n              f++;\n            }\n\n            b + 1 < k && (e.push(r = {\n              children: [],\n              index: 0\n            }), l.children[l.index] = r.children, l = r);\n          }\n\n          return e[0].children;\n        }\n\n        function X(a, d, f, e, b, B, k, l, r) {\n          function n() {\n            if (0 < x) return x--, z >> x & 1;\n            z = a[d++];\n\n            if (255 === z) {\n              var c = a[d++];\n\n              if (c) {\n                if (220 === c && g) {\n                  d += 2;\n                  var b = a[d++] << 8 | a[d++];\n                  if (0 < b && b !== f.g) throw new P(\"Found DNL marker (0xFFDC) while parsing scan data\", b);\n                }\n\n                throw new D(\"unexpected marker \" + (z << 8 | c).toString(16));\n              }\n            }\n\n            x = 7;\n            return z >>> 7;\n          }\n\n          function q(a) {\n            for (;;) {\n              a = a[n()];\n              if (\"number\" === typeof a) return a;\n              if (\"object\" !== (\"undefined\" === typeof a ? \"undefined\" : V(a))) throw new D(\"invalid huffman sequence\");\n            }\n          }\n\n          function h(a) {\n            for (var c = 0; 0 < a;) c = c << 1 | n(), a--;\n\n            return c;\n          }\n\n          function c(a) {\n            if (1 === a) return 1 === n() ? 1 : -1;\n            var c = h(a);\n            return c >= 1 << a - 1 ? c : c + (-1 << a) + 1;\n          }\n\n          function C(a, b) {\n            var d = q(a.D);\n            d = 0 === d ? 0 : c(d);\n            a.a[b] = a.m += d;\n\n            for (d = 1; 64 > d;) {\n              var h = q(a.o),\n                  k = h & 15;\n              h >>= 4;\n\n              if (0 === k) {\n                if (15 > h) break;\n                d += 16;\n              } else d += h, a.a[b + J[d]] = c(k), d++;\n            }\n          }\n\n          function w(a, d) {\n            var b = q(a.D);\n            b = 0 === b ? 0 : c(b) << r;\n            a.a[d] = a.m += b;\n          }\n\n          function p(a, c) {\n            a.a[c] |= n() << r;\n          }\n\n          function m(a, b) {\n            if (0 < A) A--;else for (var d = B; d <= k;) {\n              var e = q(a.o),\n                  f = e & 15;\n              e >>= 4;\n\n              if (0 === f) {\n                if (15 > e) {\n                  A = h(e) + (1 << e) - 1;\n                  break;\n                }\n\n                d += 16;\n              } else d += e, a.a[b + J[d]] = c(f) * (1 << r), d++;\n            }\n          }\n\n          function t(a, d) {\n            for (var b = B, e = 0, f; b <= k;) {\n              f = d + J[b];\n              var l = 0 > a.a[f] ? -1 : 1;\n\n              switch (E) {\n                case 0:\n                  e = q(a.o);\n                  f = e & 15;\n                  e >>= 4;\n                  if (0 === f) 15 > e ? (A = h(e) + (1 << e), E = 4) : (e = 16, E = 1);else {\n                    if (1 !== f) throw new D(\"invalid ACn encoding\");\n                    Q = c(f);\n                    E = e ? 2 : 3;\n                  }\n                  continue;\n\n                case 1:\n                case 2:\n                  a.a[f] ? a.a[f] += l * (n() << r) : (e--, 0 === e && (E = 2 === E ? 3 : 0));\n                  break;\n\n                case 3:\n                  a.a[f] ? a.a[f] += l * (n() << r) : (a.a[f] = Q << r, E = 0);\n                  break;\n\n                case 4:\n                  a.a[f] && (a.a[f] += l * (n() << r));\n              }\n\n              b++;\n            }\n\n            4 === E && (A--, 0 === A && (E = 0));\n          }\n\n          var g = 9 < arguments.length && void 0 !== arguments[9] ? arguments[9] : !1,\n              u = f.P,\n              v = d,\n              z = 0,\n              x = 0,\n              A = 0,\n              E = 0,\n              Q,\n              K = e.length,\n              F,\n              L,\n              M,\n              I;\n          var R = f.S ? 0 === B ? 0 === l ? w : p : 0 === l ? m : t : C;\n          var G = 0;\n          var O = 1 === K ? e[0].c * e[0].l : u * f.O;\n\n          for (var S, T; G < O;) {\n            var U = b ? Math.min(O - G, b) : O;\n\n            for (F = 0; F < K; F++) e[F].m = 0;\n\n            A = 0;\n\n            if (1 === K) {\n              var y = e[0];\n\n              for (I = 0; I < U; I++) R(y, 64 * ((y.c + 1) * (G / y.c | 0) + G % y.c)), G++;\n            } else for (I = 0; I < U; I++) {\n              for (F = 0; F < K; F++) for (y = e[F], S = y.h, T = y.j, L = 0; L < T; L++) for (M = 0; M < S; M++) R(y, 64 * ((y.c + 1) * ((G / u | 0) * y.j + L) + (G % u * y.h + M)));\n\n              G++;\n            }\n\n            x = 0;\n            (y = N(a, d)) && y.f && ((0, _util.warn)(\"decodeScan - unexpected MCU data, current marker is: \" + y.f), d = y.offset);\n            y = y && y.F;\n            if (!y || 65280 >= y) throw new D(\"marker was not found\");\n            if (65488 <= y && 65495 >= y) d += 2;else break;\n          }\n\n          (y = N(a, d)) && y.f && ((0, _util.warn)(\"decodeScan - unexpected Scan data, current marker is: \" + y.f), d = y.offset);\n          return d - v;\n        }\n\n        function Y(a, d) {\n          for (var f = d.c, e = d.l, b = new Int16Array(64), B = 0; B < e; B++) for (var k = 0; k < f; k++) {\n            var l = 64 * ((d.c + 1) * B + k),\n                r = b,\n                n = d.G,\n                q = d.a;\n            if (!n) throw new D(\"missing required Quantization Table.\");\n\n            for (var h = 0; 64 > h; h += 8) {\n              var c = q[l + h];\n              var C = q[l + h + 1];\n              var w = q[l + h + 2];\n              var p = q[l + h + 3];\n              var m = q[l + h + 4];\n              var t = q[l + h + 5];\n              var g = q[l + h + 6];\n              var u = q[l + h + 7];\n              c *= n[h];\n              if (0 === (C | w | p | m | t | g | u)) c = 5793 * c + 512 >> 10, r[h] = c, r[h + 1] = c, r[h + 2] = c, r[h + 3] = c, r[h + 4] = c, r[h + 5] = c, r[h + 6] = c, r[h + 7] = c;else {\n                C *= n[h + 1];\n                w *= n[h + 2];\n                p *= n[h + 3];\n                m *= n[h + 4];\n                t *= n[h + 5];\n                g *= n[h + 6];\n                u *= n[h + 7];\n                var v = 5793 * c + 128 >> 8;\n                var z = 5793 * m + 128 >> 8;\n                var x = w;\n                var A = g;\n                m = 2896 * (C - u) + 128 >> 8;\n                u = 2896 * (C + u) + 128 >> 8;\n                p <<= 4;\n                t <<= 4;\n                v = v + z + 1 >> 1;\n                z = v - z;\n                c = 3784 * x + 1567 * A + 128 >> 8;\n                x = 1567 * x - 3784 * A + 128 >> 8;\n                A = c;\n                m = m + t + 1 >> 1;\n                t = m - t;\n                u = u + p + 1 >> 1;\n                p = u - p;\n                v = v + A + 1 >> 1;\n                A = v - A;\n                z = z + x + 1 >> 1;\n                x = z - x;\n                c = 2276 * m + 3406 * u + 2048 >> 12;\n                m = 3406 * m - 2276 * u + 2048 >> 12;\n                u = c;\n                c = 799 * p + 4017 * t + 2048 >> 12;\n                p = 4017 * p - 799 * t + 2048 >> 12;\n                t = c;\n                r[h] = v + u;\n                r[h + 7] = v - u;\n                r[h + 1] = z + t;\n                r[h + 6] = z - t;\n                r[h + 2] = x + p;\n                r[h + 5] = x - p;\n                r[h + 3] = A + m;\n                r[h + 4] = A - m;\n              }\n            }\n\n            for (n = 0; 8 > n; ++n) c = r[n], C = r[n + 8], w = r[n + 16], p = r[n + 24], m = r[n + 32], t = r[n + 40], g = r[n + 48], u = r[n + 56], 0 === (C | w | p | m | t | g | u) ? (c = 5793 * c + 8192 >> 14, c = -2040 > c ? 0 : 2024 <= c ? 255 : c + 2056 >> 4, q[l + n] = c, q[l + n + 8] = c, q[l + n + 16] = c, q[l + n + 24] = c, q[l + n + 32] = c, q[l + n + 40] = c, q[l + n + 48] = c, q[l + n + 56] = c) : (v = 5793 * c + 2048 >> 12, z = 5793 * m + 2048 >> 12, x = w, A = g, m = 2896 * (C - u) + 2048 >> 12, u = 2896 * (C + u) + 2048 >> 12, v = (v + z + 1 >> 1) + 4112, z = v - z, c = 3784 * x + 1567 * A + 2048 >> 12, x = 1567 * x - 3784 * A + 2048 >> 12, A = c, m = m + t + 1 >> 1, t = m - t, u = u + p + 1 >> 1, p = u - p, v = v + A + 1 >> 1, A = v - A, z = z + x + 1 >> 1, x = z - x, c = 2276 * m + 3406 * u + 2048 >> 12, m = 3406 * m - 2276 * u + 2048 >> 12, u = c, c = 799 * p + 4017 * t + 2048 >> 12, p = 4017 * p - 799 * t + 2048 >> 12, t = c, c = v + u, u = v - u, C = z + t, g = z - t, w = x + p, t = x - p, p = A + m, m = A - m, c = 16 > c ? 0 : 4080 <= c ? 255 : c >> 4, C = 16 > C ? 0 : 4080 <= C ? 255 : C >> 4, w = 16 > w ? 0 : 4080 <= w ? 255 : w >> 4, p = 16 > p ? 0 : 4080 <= p ? 255 : p >> 4, m = 16 > m ? 0 : 4080 <= m ? 255 : m >> 4, t = 16 > t ? 0 : 4080 <= t ? 255 : t >> 4, g = 16 > g ? 0 : 4080 <= g ? 255 : g >> 4, u = 16 > u ? 0 : 4080 <= u ? 255 : u >> 4, q[l + n] = c, q[l + n + 8] = C, q[l + n + 16] = w, q[l + n + 24] = p, q[l + n + 32] = m, q[l + n + 40] = t, q[l + n + 48] = g, q[l + n + 56] = u);\n          }\n\n          return d.a;\n        }\n\n        function N(a, d) {\n          var f = 2 < arguments.length && void 0 !== arguments[2] ? arguments[2] : d,\n              e = a.length - 1;\n          f = f < d ? f : d;\n          if (d >= e) return null;\n          var b = a[d] << 8 | a[d + 1];\n          if (65472 <= b && 65534 >= b) return {\n            f: null,\n            F: b,\n            offset: d\n          };\n\n          for (var B = a[f] << 8 | a[f + 1]; !(65472 <= B && 65534 >= B);) {\n            if (++f >= e) return null;\n            B = a[f] << 8 | a[f + 1];\n          }\n\n          return {\n            f: b.toString(16),\n            F: B,\n            offset: f\n          };\n        }\n\n        var J = new Uint8Array([0, 1, 8, 16, 9, 2, 3, 10, 17, 24, 32, 25, 18, 11, 4, 5, 12, 19, 26, 33, 40, 48, 41, 34, 27, 20, 13, 6, 7, 14, 21, 28, 35, 42, 49, 56, 57, 50, 43, 36, 29, 22, 15, 23, 30, 37, 44, 51, 58, 59, 52, 45, 38, 31, 39, 46, 53, 60, 61, 54, 47, 55, 62, 63]);\n        g.prototype = {\n          parse: function (a) {\n            function d() {\n              var d = a[k] << 8 | a[k + 1];\n              k += 2;\n              return d;\n            }\n\n            function f() {\n              var b = d();\n              b = k + b - 2;\n              var c = N(a, b, k);\n              c && c.f && ((0, _util.warn)(\"readDataBlock - incorrect length, current marker is: \" + c.f), b = c.offset);\n              b = a.subarray(k, b);\n              k += b.length;\n              return b;\n            }\n\n            function e(a) {\n              for (var b = Math.ceil(a.v / 8 / a.s), c = Math.ceil(a.g / 8 / a.u), d = 0; d < a.b.length; d++) {\n                v = a.b[d];\n                var e = Math.ceil(Math.ceil(a.v / 8) * v.h / a.s),\n                    f = Math.ceil(Math.ceil(a.g / 8) * v.j / a.u);\n                v.a = new Int16Array(64 * c * v.j * (b * v.h + 1));\n                v.c = e;\n                v.l = f;\n              }\n\n              a.P = b;\n              a.O = c;\n            }\n\n            var b = (1 < arguments.length && void 0 !== arguments[1] ? arguments[1] : {}).N,\n                B = void 0 === b ? null : b,\n                k = 0,\n                l = null,\n                r = 0;\n            b = [];\n            var n = [],\n                q = [],\n                h = d();\n            if (65496 !== h) throw new D(\"SOI not found\");\n\n            for (h = d(); 65497 !== h;) {\n              switch (h) {\n                case 65504:\n                case 65505:\n                case 65506:\n                case 65507:\n                case 65508:\n                case 65509:\n                case 65510:\n                case 65511:\n                case 65512:\n                case 65513:\n                case 65514:\n                case 65515:\n                case 65516:\n                case 65517:\n                case 65518:\n                case 65519:\n                case 65534:\n                  var c = f();\n                  65518 === h && 65 === c[0] && 100 === c[1] && 111 === c[2] && 98 === c[3] && 101 === c[4] && (l = {\n                    version: c[5] << 8 | c[6],\n                    Y: c[7] << 8 | c[8],\n                    Z: c[9] << 8 | c[10],\n                    W: c[11]\n                  });\n                  break;\n\n                case 65499:\n                  h = d() + k - 2;\n\n                  for (var g; k < h;) {\n                    var w = a[k++],\n                        p = new Uint16Array(64);\n                    if (0 === w >> 4) for (c = 0; 64 > c; c++) g = J[c], p[g] = a[k++];else if (1 === w >> 4) for (c = 0; 64 > c; c++) g = J[c], p[g] = d();else throw new D(\"DQT - invalid table spec\");\n                    b[w & 15] = p;\n                  }\n\n                  break;\n\n                case 65472:\n                case 65473:\n                case 65474:\n                  if (m) throw new D(\"Only single frame JPEGs supported\");\n                  d();\n                  var m = {};\n                  m.X = 65473 === h;\n                  m.S = 65474 === h;\n                  m.precision = a[k++];\n                  h = d();\n                  m.g = B || h;\n                  m.v = d();\n                  m.b = [];\n                  m.C = {};\n                  c = a[k++];\n\n                  for (h = p = w = 0; h < c; h++) {\n                    g = a[k];\n                    var t = a[k + 1] >> 4;\n                    var H = a[k + 1] & 15;\n                    w < t && (w = t);\n                    p < H && (p = H);\n                    t = m.b.push({\n                      h: t,\n                      j: H,\n                      T: a[k + 2],\n                      G: null\n                    });\n                    m.C[g] = t - 1;\n                    k += 3;\n                  }\n\n                  m.s = w;\n                  m.u = p;\n                  e(m);\n                  break;\n\n                case 65476:\n                  g = d();\n\n                  for (h = 2; h < g;) {\n                    w = a[k++];\n                    p = new Uint8Array(16);\n\n                    for (c = t = 0; 16 > c; c++, k++) t += p[c] = a[k];\n\n                    H = new Uint8Array(t);\n\n                    for (c = 0; c < t; c++, k++) H[c] = a[k];\n\n                    h += 17 + t;\n                    (0 === w >> 4 ? q : n)[w & 15] = W(p, H);\n                  }\n\n                  break;\n\n                case 65501:\n                  d();\n                  var u = d();\n                  break;\n\n                case 65498:\n                  c = 1 === ++r && !B;\n                  d();\n                  w = a[k++];\n                  g = [];\n\n                  for (h = 0; h < w; h++) {\n                    p = m.C[a[k++]];\n                    var v = m.b[p];\n                    p = a[k++];\n                    v.D = q[p >> 4];\n                    v.o = n[p & 15];\n                    g.push(v);\n                  }\n\n                  h = a[k++];\n                  w = a[k++];\n                  p = a[k++];\n\n                  try {\n                    var z = X(a, k, m, g, u, h, w, p >> 4, p & 15, c);\n                    k += z;\n                  } catch (x) {\n                    if (x instanceof P) return (0, _util.warn)('Attempting to re-parse JPEG image using \"scanLines\" parameter found in DNL marker (0xFFDC) segment.'), this.parse(a, {\n                      N: x.g\n                    });\n                    throw x;\n                  }\n\n                  break;\n\n                case 65500:\n                  k += 4;\n                  break;\n\n                case 65535:\n                  255 !== a[k] && k--;\n                  break;\n\n                default:\n                  if (255 === a[k - 3] && 192 <= a[k - 2] && 254 >= a[k - 2]) k -= 3;else if ((c = N(a, k - 2)) && c.f) (0, _util.warn)(\"JpegImage.parse - unexpected data, current marker is: \" + c.f), k = c.offset;else throw new D(\"unknown marker \" + h.toString(16));\n              }\n\n              h = d();\n            }\n\n            this.width = m.v;\n            this.height = m.g;\n            this.A = l;\n            this.b = [];\n\n            for (h = 0; h < m.b.length; h++) {\n              v = m.b[h];\n              if (u = b[v.T]) v.G = u;\n              this.b.push({\n                R: Y(m, v),\n                U: v.h / m.s,\n                V: v.j / m.u,\n                c: v.c,\n                l: v.l\n              });\n            }\n\n            this.i = this.b.length;\n          },\n          L: function (a, d) {\n            var f = this.width / a,\n                e = this.height / d,\n                b,\n                g,\n                k = this.b.length,\n                l = a * d * k,\n                r = new Uint8ClampedArray(l),\n                n = new Uint32Array(a);\n\n            for (g = 0; g < k; g++) {\n              var q = this.b[g];\n              var h = q.U * f;\n              var c = q.V * e;\n              var C = g;\n              var w = q.R;\n              var p = q.c + 1 << 3;\n\n              for (b = 0; b < a; b++) q = 0 | b * h, n[b] = (q & 4294967288) << 3 | q & 7;\n\n              for (h = 0; h < d; h++) for (q = 0 | h * c, q = p * (q & 4294967288) | (q & 7) << 3, b = 0; b < a; b++) r[C] = w[q + n[b]], C += k;\n            }\n\n            if (e = this.M) for (g = 0; g < l;) for (f = q = 0; q < k; q++, g++, f += 2) r[g] = (r[g] * e[f] >> 8) + e[f + 1];\n            return r;\n          },\n          w: function () {\n            return this.A ? !!this.A.W : 3 === this.i ? 0 === this.B ? !1 : !0 : 1 === this.B ? !0 : !1;\n          },\n          I: function (a) {\n            for (var d, f, e, b = 0, g = a.length; b < g; b += 3) d = a[b], f = a[b + 1], e = a[b + 2], a[b] = d - 179.456 + 1.402 * e, a[b + 1] = d + 135.459 - .344 * f - .714 * e, a[b + 2] = d - 226.816 + 1.772 * f;\n\n            return a;\n          },\n          K: function (a) {\n            for (var d, f, e, b, g = 0, k = 0, l = a.length; k < l; k += 4) d = a[k], f = a[k + 1], e = a[k + 2], b = a[k + 3], a[g++] = -122.67195406894 + f * (-6.60635669420364E-5 * f + 4.37130475926232E-4 * e - 5.4080610064599E-5 * d + 4.8449797120281E-4 * b - .154362151871126) + e * (-9.57964378445773E-4 * e + 8.17076911346625E-4 * d - .00477271405408747 * b + 1.53380253221734) + d * (9.61250184130688E-4 * d - .00266257332283933 * b + .48357088451265) + b * (-3.36197177618394E-4 * b + .484791561490776), a[g++] = 107.268039397724 + f * (2.19927104525741E-5 * f - 6.40992018297945E-4 * e + 6.59397001245577E-4 * d + 4.26105652938837E-4 * b - .176491792462875) + e * (-7.78269941513683E-4 * e + .00130872261408275 * d + 7.70482631801132E-4 * b - .151051492775562) + d * (.00126935368114843 * d - .00265090189010898 * b + .25802910206845) + b * (-3.18913117588328E-4 * b - .213742400323665), a[g++] = -20.810012546947 + f * (-5.70115196973677E-4 * f - 2.63409051004589E-5 * e + .0020741088115012 * d - .00288260236853442 * b + .814272968359295) + e * (-1.53496057440975E-5 * e - 1.32689043961446E-4 * d + 5.60833691242812E-4 * b - .195152027534049) + d * (.00174418132927582 * d - .00255243321439347 * b + .116935020465145) + b * (-3.43531996510555E-4 * b + .24165260232407);\n\n            return a.subarray(0, g);\n          },\n          J: function (a) {\n            for (var d, f, e, b = 0, g = a.length; b < g; b += 4) d = a[b], f = a[b + 1], e = a[b + 2], a[b] = 434.456 - d - 1.402 * e, a[b + 1] = 119.541 - d + .344 * f + .714 * e, a[b + 2] = 481.816 - d - 1.772 * f;\n\n            return a;\n          },\n          H: function (a) {\n            for (var d, f, e, b, g = 0, k = 1 / 255, l = 0, r = a.length; l < r; l += 4) d = a[l] * k, f = a[l + 1] * k, e = a[l + 2] * k, b = a[l + 3] * k, a[g++] = 255 + d * (-4.387332384609988 * d + 54.48615194189176 * f + 18.82290502165302 * e + 212.25662451639585 * b - 285.2331026137004) + f * (1.7149763477362134 * f - 5.6096736904047315 * e - 17.873870861415444 * b - 5.497006427196366) + e * (-2.5217340131683033 * e - 21.248923337353073 * b + 17.5119270841813) - b * (21.86122147463605 * b + 189.48180835922747), a[g++] = 255 + d * (8.841041422036149 * d + 60.118027045597366 * f + 6.871425592049007 * e + 31.159100130055922 * b - 79.2970844816548) + f * (-15.310361306967817 * f + 17.575251261109482 * e + 131.35250912493976 * b - 190.9453302588951) + e * (4.444339102852739 * e + 9.8632861493405 * b - 24.86741582555878) - b * (20.737325471181034 * b + 187.80453709719578), a[g++] = 255 + d * (.8842522430003296 * d + 8.078677503112928 * f + 30.89978309703729 * e - .23883238689178934 * b - 14.183576799673286) + f * (10.49593273432072 * f + 63.02378494754052 * e + 50.606957656360734 * b - 112.23884253719248) + e * (.03296041114873217 * e + 115.60384449646641 * b - 193.58209356861505) - b * (22.33816807309886 * b + 180.12613974708367);\n\n            return a.subarray(0, g);\n          },\n          getData: function (a, d, f) {\n            if (4 < this.i) throw new D(\"Unsupported color mode\");\n            a = this.L(a, d);\n\n            if (1 === this.i && f) {\n              f = a.length;\n              d = new Uint8ClampedArray(3 * f);\n\n              for (var e = 0, b = 0; b < f; b++) {\n                var g = a[b];\n                d[e++] = g;\n                d[e++] = g;\n                d[e++] = g;\n              }\n\n              return d;\n            }\n\n            if (3 === this.i && this.w()) return this.I(a);\n\n            if (4 === this.i) {\n              if (this.w()) return f ? this.K(a) : this.J(a);\n              if (f) return this.H(a);\n            }\n\n            return a;\n          }\n        };\n        UTIF.JpegDecoder = g;\n      })();\n    })(); //UTIF.JpegDecoder = PDFJS.JpegImage;\n\n\n    UTIF.encodeImage = function (rgba, w, h, metadata) {\n      var idf = {\n        \"t256\": [w],\n        \"t257\": [h],\n        \"t258\": [8, 8, 8, 8],\n        \"t259\": [1],\n        \"t262\": [2],\n        \"t273\": [1000],\n        // strips offset\n        \"t277\": [4],\n        \"t278\": [h],\n\n        /* rows per strip */\n        \"t279\": [w * h * 4],\n        // strip byte counts\n        \"t282\": [1],\n        \"t283\": [1],\n        \"t284\": [1],\n        \"t286\": [0],\n        \"t287\": [0],\n        \"t296\": [1],\n        \"t305\": [\"Photopea (UTIF.js)\"],\n        \"t338\": [1]\n      };\n      if (metadata) for (var i in metadata) idf[i] = metadata[i];\n      var prfx = new Uint8Array(UTIF.encode([idf]));\n      var img = new Uint8Array(rgba);\n      var data = new Uint8Array(1000 + w * h * 4);\n\n      for (var i = 0; i < prfx.length; i++) data[i] = prfx[i];\n\n      for (var i = 0; i < img.length; i++) data[1000 + i] = img[i];\n\n      return data.buffer;\n    };\n\n    UTIF.encode = function (ifds) {\n      var data = new Uint8Array(20000),\n          offset = 4,\n          bin = UTIF._binBE;\n      data[0] = 77;\n      data[1] = 77;\n      data[3] = 42;\n      var ifdo = 8;\n      bin.writeUint(data, offset, ifdo);\n      offset += 4;\n\n      for (var i = 0; i < ifds.length; i++) {\n        var noffs = UTIF._writeIFD(bin, data, ifdo, ifds[i]);\n\n        ifdo = noffs[1];\n        if (i < ifds.length - 1) bin.writeUint(data, noffs[0], ifdo);\n      }\n\n      return data.slice(0, ifdo).buffer;\n    }; //UTIF.encode._writeIFD\n\n\n    UTIF.decode = function (buff) {\n      UTIF.decode._decodeG3.allow2D = null;\n      var data = new Uint8Array(buff),\n          offset = 0;\n\n      var id = UTIF._binBE.readASCII(data, offset, 2);\n\n      offset += 2;\n      var bin = id == \"II\" ? UTIF._binLE : UTIF._binBE;\n      var num = bin.readUshort(data, offset);\n      offset += 2;\n      var ifdo = bin.readUint(data, offset);\n      offset += 4;\n      var ifds = [];\n\n      while (true) {\n        var noff = UTIF._readIFD(bin, data, ifdo, ifds, 0, false);\n\n        ifdo = bin.readUint(data, noff);\n        if (ifdo == 0) break;\n      }\n\n      return ifds;\n    };\n\n    UTIF.decodeImage = function (buff, img, ifds) {\n      var data = new Uint8Array(buff);\n\n      var id = UTIF._binBE.readASCII(data, 0, 2);\n\n      if (img[\"t256\"] == null) return; // No width => probably not an image\n\n      img.isLE = id == \"II\";\n      img.width = img[\"t256\"][0]; //delete img[\"t256\"];\n\n      img.height = img[\"t257\"][0]; //delete img[\"t257\"];\n\n      var cmpr = img[\"t259\"] ? img[\"t259\"][0] : 1; //delete img[\"t259\"];\n\n      var fo = img[\"t266\"] ? img[\"t266\"][0] : 1; //delete img[\"t266\"];\n\n      if (img[\"t284\"] && img[\"t284\"][0] == 2) log(\"PlanarConfiguration 2 should not be used!\");\n      var bipp; // bits per pixel\n\n      if (img[\"t258\"]) bipp = Math.min(32, img[\"t258\"][0]) * img[\"t258\"].length;else bipp = img[\"t277\"] ? img[\"t277\"][0] : 1; // Some .NEF files have t258==14, even though they use 16 bits per pixel\n\n      if (cmpr == 1 && img[\"t279\"] != null && img[\"t278\"] && img[\"t262\"][0] == 32803) {\n        bipp = Math.round(img[\"t279\"][0] * 8 / (img.width * img[\"t278\"][0]));\n      }\n\n      var bipl = Math.ceil(img.width * bipp / 8) * 8;\n      var soff = img[\"t273\"];\n      if (soff == null) soff = img[\"t324\"];\n      var bcnt = img[\"t279\"];\n      if (cmpr == 1 && soff.length == 1) bcnt = [img.height * (bipl >>> 3)];\n      if (bcnt == null) bcnt = img[\"t325\"];\n      var bytes = new Uint8Array(img.height * (bipl >>> 3)),\n          bilen = 0;\n\n      if (img[\"t322\"] != null) // tiled\n        {\n          var tw = img[\"t322\"][0],\n              th = img[\"t323\"][0];\n          var tx = Math.floor((img.width + tw - 1) / tw);\n          var ty = Math.floor((img.height + th - 1) / th);\n          var tbuff = new Uint8Array(Math.ceil(tw * th * bipp / 8) | 0);\n\n          for (var y = 0; y < ty; y++) for (var x = 0; x < tx; x++) {\n            var i = y * tx + x;\n\n            for (var j = 0; j < tbuff.length; j++) tbuff[j] = 0;\n\n            UTIF.decode._decompress(img, ifds, data, soff[i], bcnt[i], cmpr, tbuff, 0, fo); // Might be required for 7 too. Need to check\n\n\n            if (cmpr == 6) bytes = tbuff;else UTIF._copyTile(tbuff, Math.ceil(tw * bipp / 8) | 0, th, bytes, Math.ceil(img.width * bipp / 8) | 0, img.height, Math.ceil(x * tw * bipp / 8) | 0, y * th);\n          }\n\n          bilen = bytes.length * 8;\n        } else // stripped\n        {\n          var rps = img[\"t278\"] ? img[\"t278\"][0] : img.height;\n          rps = Math.min(rps, img.height);\n\n          for (var i = 0; i < soff.length; i++) {\n            UTIF.decode._decompress(img, ifds, data, soff[i], bcnt[i], cmpr, bytes, Math.ceil(bilen / 8) | 0, fo);\n\n            bilen += bipl * rps;\n          }\n\n          bilen = Math.min(bilen, bytes.length * 8);\n        }\n\n      img.data = new Uint8Array(bytes.buffer, 0, Math.ceil(bilen / 8) | 0);\n    };\n\n    UTIF.decode._decompress = function (img, ifds, data, off, len, cmpr, tgt, toff, fo) // fill order\n    {\n      //console.log(\"compression\", cmpr);\n      //var time = Date.now();\n      if (false) {} else if (cmpr == 1 || len == tgt.length && cmpr != 32767) for (var j = 0; j < len; j++) tgt[toff + j] = data[off + j];else if (cmpr == 3) UTIF.decode._decodeG3(data, off, len, tgt, toff, img.width, fo);else if (cmpr == 4) UTIF.decode._decodeG4(data, off, len, tgt, toff, img.width, fo);else if (cmpr == 5) UTIF.decode._decodeLZW(data, off, tgt, toff);else if (cmpr == 6) UTIF.decode._decodeOldJPEG(img, data, off, len, tgt, toff);else if (cmpr == 7) UTIF.decode._decodeNewJPEG(img, data, off, len, tgt, toff);else if (cmpr == 8) {\n        var src = new Uint8Array(data.buffer, off, len);\n        var bin = pako[\"inflate\"](src);\n\n        for (var i = 0; i < bin.length; i++) tgt[toff + i] = bin[i];\n      } else if (cmpr == 32767) UTIF.decode._decodeARW(img, data, off, len, tgt, toff);else if (cmpr == 32773) UTIF.decode._decodePackBits(data, off, len, tgt, toff);else if (cmpr == 32809) UTIF.decode._decodeThunder(data, off, len, tgt, toff);else if (cmpr == 34713) //for(var j=0; j<len; j++) tgt[toff+j] = data[off+j];\n        UTIF.decode._decodeNikon(img, ifds, data, off, len, tgt, toff);else log(\"Unknown compression\", cmpr); //console.log(Date.now()-time);\n\n\n      var bps = img[\"t258\"] ? Math.min(32, img[\"t258\"][0]) : 1;\n      var noc = img[\"t277\"] ? img[\"t277\"][0] : 1,\n          bpp = bps * noc >>> 3,\n          h = img[\"t278\"] ? img[\"t278\"][0] : img.height,\n          bpl = Math.ceil(bps * noc * img.width / 8); // convert to Little Endian  /*\n\n      if (bps == 16 && !img.isLE && img[\"t33422\"] == null) // not DNG\n        for (var y = 0; y < h; y++) {\n          //console.log(\"fixing endianity\");\n          var roff = toff + y * bpl;\n\n          for (var x = 1; x < bpl; x += 2) {\n            var t = tgt[roff + x];\n            tgt[roff + x] = tgt[roff + x - 1];\n            tgt[roff + x - 1] = t;\n          }\n        } //*/\n\n      if (img[\"t317\"] && img[\"t317\"][0] == 2) {\n        for (var y = 0; y < h; y++) {\n          var ntoff = toff + y * bpl;\n          if (bps == 16) for (var j = bpp; j < bpl; j += 2) {\n            var nv = (tgt[ntoff + j + 1] << 8 | tgt[ntoff + j]) + (tgt[ntoff + j - bpp + 1] << 8 | tgt[ntoff + j - bpp]);\n            tgt[ntoff + j] = nv & 255;\n            tgt[ntoff + j + 1] = nv >>> 8 & 255;\n          } else if (noc == 3) for (var j = 3; j < bpl; j += 3) {\n            tgt[ntoff + j] = tgt[ntoff + j] + tgt[ntoff + j - 3] & 255;\n            tgt[ntoff + j + 1] = tgt[ntoff + j + 1] + tgt[ntoff + j - 2] & 255;\n            tgt[ntoff + j + 2] = tgt[ntoff + j + 2] + tgt[ntoff + j - 1] & 255;\n          } else for (var j = bpp; j < bpl; j++) tgt[ntoff + j] = tgt[ntoff + j] + tgt[ntoff + j - bpp] & 255;\n        }\n      }\n    };\n\n    UTIF.decode._ljpeg_diff = function (data, prm, huff) {\n      var getbithuff = UTIF.decode._getbithuff;\n      var len, diff;\n      len = getbithuff(data, prm, huff[0], huff);\n      diff = getbithuff(data, prm, len, 0);\n      if ((diff & 1 << len - 1) == 0) diff -= (1 << len) - 1;\n      return diff;\n    };\n\n    UTIF.decode._decodeARW = function (img, inp, off, src_length, tgt, toff) {\n      var raw_width = img[\"t256\"][0],\n          height = img[\"t257\"][0],\n          tiff_bps = img[\"t258\"][0];\n      var bin = img.isLE ? UTIF._binLE : UTIF._binBE; //console.log(raw_width, height, tiff_bps, raw_width*height, src_length);\n\n      var arw2 = raw_width * height == src_length || raw_width * height * 1.5 == src_length; //arw2 = true;\n      //console.log(\"ARW2: \", arw2, raw_width*height, src_length, tgt.length);\n\n      if (!arw2) {\n        //\"sony_arw_load_raw\"; // not arw2\n        height += 8;\n        var prm = [off, 0, 0, 0];\n        var huff = new Uint16Array(32770);\n        var tab = [0xf11, 0xf10, 0xe0f, 0xd0e, 0xc0d, 0xb0c, 0xa0b, 0x90a, 0x809, 0x708, 0x607, 0x506, 0x405, 0x304, 0x303, 0x300, 0x202, 0x201];\n        var i,\n            c,\n            n,\n            col,\n            row,\n            sum = 0;\n        var ljpeg_diff = UTIF.decode._ljpeg_diff;\n        huff[0] = 15;\n\n        for (n = i = 0; i < 18; i++) {\n          var lim = 32768 >>> (tab[i] >>> 8);\n\n          for (var c = 0; c < lim; c++) huff[++n] = tab[i];\n        }\n\n        for (col = raw_width; col--;) for (row = 0; row < height + 1; row += 2) {\n          if (row == height) row = 1;\n          sum += ljpeg_diff(inp, prm, huff);\n\n          if (row < height) {\n            var clr = sum & 4095;\n\n            UTIF.decode._putsF(tgt, (row * raw_width + col) * tiff_bps, clr << 16 - tiff_bps);\n          }\n        }\n\n        return;\n      }\n\n      if (raw_width * height * 1.5 == src_length) {\n        //console.log(\"weird compression\");\n        for (var i = 0; i < src_length; i += 3) {\n          var b0 = inp[off + i + 0],\n              b1 = inp[off + i + 1],\n              b2 = inp[off + i + 2];\n          tgt[toff + i] = b1 << 4 | b0 >>> 4;\n          tgt[toff + i + 1] = b0 << 4 | b2 >>> 4;\n          tgt[toff + i + 2] = b2 << 4 | b1 >>> 4;\n        }\n\n        return;\n      }\n\n      var pix = new Uint16Array(16);\n      var row, col, val, max, min, imax, imin, sh, bit, i, dp;\n      var data = new Uint8Array(raw_width + 1);\n\n      for (row = 0; row < height; row++) {\n        //fread (data, 1, raw_width, ifp);\n        for (var j = 0; j < raw_width; j++) data[j] = inp[off++];\n\n        for (dp = 0, col = 0; col < raw_width - 30; dp += 16) {\n          max = 0x7ff & (val = bin.readUint(data, dp));\n          min = 0x7ff & val >>> 11;\n          imax = 0x0f & val >>> 22;\n          imin = 0x0f & val >>> 26;\n\n          for (sh = 0; sh < 4 && 0x80 << sh <= max - min; sh++);\n\n          for (bit = 30, i = 0; i < 16; i++) if (i == imax) pix[i] = max;else if (i == imin) pix[i] = min;else {\n            pix[i] = ((bin.readUshort(data, dp + (bit >> 3)) >>> (bit & 7) & 0x7f) << sh) + min;\n            if (pix[i] > 0x7ff) pix[i] = 0x7ff;\n            bit += 7;\n          }\n\n          for (i = 0; i < 16; i++, col += 2) {\n            //RAW(row,col) = curve[pix[i] << 1] >> 2;\n            var clr = pix[i] << 1; //clr = 0xffff;\n\n            UTIF.decode._putsF(tgt, (row * raw_width + col) * tiff_bps, clr << 16 - tiff_bps);\n          }\n\n          col -= col & 1 ? 1 : 31;\n        }\n      }\n    };\n\n    UTIF.decode._decodeNikon = function (img, imgs, data, off, src_length, tgt, toff) {\n      var nikon_tree = [[0, 0, 1, 5, 1, 1, 1, 1, 1, 1, 2, 0, 0, 0, 0, 0, 0,\n      /* 12-bit lossy */\n      5, 4, 3, 6, 2, 7, 1, 0, 8, 9, 11, 10, 12], [0, 0, 1, 5, 1, 1, 1, 1, 1, 1, 2, 0, 0, 0, 0, 0, 0,\n      /* 12-bit lossy after split */\n      0x39, 0x5a, 0x38, 0x27, 0x16, 5, 4, 3, 2, 1, 0, 11, 12, 12], [0, 0, 1, 4, 2, 3, 1, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0,\n      /* 12-bit lossless */\n      5, 4, 6, 3, 7, 2, 8, 1, 9, 0, 10, 11, 12], [0, 0, 1, 4, 3, 1, 1, 1, 1, 1, 2, 0, 0, 0, 0, 0, 0,\n      /* 14-bit lossy */\n      5, 6, 4, 7, 8, 3, 9, 2, 1, 0, 10, 11, 12, 13, 14], [0, 0, 1, 5, 1, 1, 1, 1, 1, 1, 1, 2, 0, 0, 0, 0, 0,\n      /* 14-bit lossy after split */\n      8, 0x5c, 0x4b, 0x3a, 0x29, 7, 6, 5, 4, 3, 2, 1, 0, 13, 14], [0, 0, 1, 4, 2, 2, 3, 1, 2, 0, 0, 0, 0, 0, 0, 0, 0,\n      /* 14-bit lossless */\n      7, 6, 8, 5, 9, 4, 10, 3, 11, 12, 2, 0, 1, 13, 14]];\n      var raw_width = img[\"t256\"][0],\n          height = img[\"t257\"][0],\n          tiff_bps = img[\"t258\"][0];\n      var tree = 0,\n          split = 0;\n      var make_decoder = UTIF.decode._make_decoder;\n      var getbithuff = UTIF.decode._getbithuff;\n      var mn = imgs[0].exifIFD.makerNote,\n          md = mn[\"t150\"] ? mn[\"t150\"] : mn[\"t140\"],\n          mdo = 0; //console.log(mn,md);\n      //console.log(md[0].toString(16), md[1].toString(16), tiff_bps);\n\n      var ver0 = md[mdo++],\n          ver1 = md[mdo++];\n      if (ver0 == 0x49 || ver1 == 0x58) mdo += 2110;\n      if (ver0 == 0x46) tree = 2;\n      if (tiff_bps == 14) tree += 3;\n      var vpred = [[0, 0], [0, 0]],\n          bin = img.isLE ? UTIF._binLE : UTIF._binBE;\n\n      for (var i = 0; i < 2; i++) for (var j = 0; j < 2; j++) {\n        vpred[i][j] = bin.readShort(md, mdo);\n        mdo += 2;\n      } // not sure here ... [i][j] or [j][i]\n      //console.log(vpred);\n\n\n      var max = 1 << tiff_bps & 0x7fff,\n          step = 0;\n      var csize = bin.readShort(md, mdo);\n      mdo += 2;\n      if (csize > 1) step = Math.floor(max / (csize - 1));\n      if (ver0 == 0x44 && ver1 == 0x20 && step > 0) split = bin.readShort(md, 562);\n      var i;\n      var row, col;\n      var len, shl, diff;\n      var min_v = 0;\n      var hpred = [0, 0];\n      var huff = make_decoder(nikon_tree[tree]); //var g_input_offset=0, bitbuf=0, vbits=0, reset=0;\n\n      var prm = [off, 0, 0, 0]; //console.log(split);  split = 170;\n\n      for (min_v = row = 0; row < height; row++) {\n        if (split && row == split) {\n          //free (huff);\n          huff = make_decoder(nikon_tree[tree + 1]); //max_v += (min_v = 16) << 1;\n        }\n\n        for (col = 0; col < raw_width; col++) {\n          i = getbithuff(data, prm, huff[0], huff);\n          len = i & 15;\n          shl = i >>> 4;\n          diff = (getbithuff(data, prm, len - shl, 0) << 1) + 1 << shl >>> 1;\n          if ((diff & 1 << len - 1) == 0) diff -= (1 << len) - (shl == 0 ? 1 : 0);\n          if (col < 2) hpred[col] = vpred[row & 1][col] += diff;else hpred[col & 1] += diff;\n          var clr = Math.min(Math.max(hpred[col & 1], 0), (1 << tiff_bps) - 1);\n          var bti = (row * raw_width + col) * tiff_bps;\n\n          UTIF.decode._putsF(tgt, bti, clr << 16 - tiff_bps);\n        }\n      }\n    }; // put 16 bits\n\n\n    UTIF.decode._putsF = function (dt, pos, val) {\n      val = val << 8 - (pos & 7);\n      var o = pos >>> 3;\n      dt[o] |= val >>> 16;\n      dt[o + 1] |= val >>> 8;\n      dt[o + 2] |= val;\n    };\n\n    UTIF.decode._getbithuff = function (data, prm, nbits, huff) {\n      var zero_after_ff = 0;\n      var get_byte = UTIF.decode._get_byte;\n      var c;\n      var off = prm[0],\n          bitbuf = prm[1],\n          vbits = prm[2],\n          reset = prm[3]; //if (nbits > 25) return 0;\n      //if (nbits <  0) return bitbuf = vbits = reset = 0;\n\n      if (nbits == 0 || vbits < 0) return 0;\n\n      while (!reset && vbits < nbits && (c = data[off++]) != -1 && !(reset = zero_after_ff && c == 0xff && data[off++])) {\n        //console.log(\"byte read into c\");\n        bitbuf = (bitbuf << 8) + c;\n        vbits += 8;\n      }\n\n      c = bitbuf << 32 - vbits >>> 32 - nbits;\n\n      if (huff) {\n        vbits -= huff[c + 1] >>> 8; //console.log(c, huff[c]>>8);\n\n        c = huff[c + 1] & 255;\n      } else vbits -= nbits;\n\n      if (vbits < 0) throw \"e\";\n      prm[0] = off;\n      prm[1] = bitbuf;\n      prm[2] = vbits;\n      prm[3] = reset;\n      return c;\n    };\n\n    UTIF.decode._make_decoder = function (source) {\n      var max, len, h, i, j;\n      var huff = [];\n\n      for (max = 16; max != 0 && !source[max]; max--);\n\n      var si = 17;\n      huff[0] = max;\n\n      for (h = len = 1; len <= max; len++) for (i = 0; i < source[len]; i++, ++si) for (j = 0; j < 1 << max - len; j++) if (h <= 1 << max) huff[h++] = len << 8 | source[si];\n\n      return huff;\n    };\n\n    UTIF.decode._decodeNewJPEG = function (img, data, off, len, tgt, toff) {\n      var tables = img[\"t347\"],\n          tlen = tables ? tables.length : 0,\n          buff = new Uint8Array(tlen + len);\n\n      if (tables) {\n        var SOI = 216,\n            EOI = 217,\n            boff = 0;\n\n        for (var i = 0; i < tlen - 1; i++) {\n          // Skip EOI marker from JPEGTables\n          if (tables[i] == 255 && tables[i + 1] == EOI) break;\n          buff[boff++] = tables[i];\n        } // Skip SOI marker from data\n\n\n        var byte1 = data[off],\n            byte2 = data[off + 1];\n\n        if (byte1 != 255 || byte2 != SOI) {\n          buff[boff++] = byte1;\n          buff[boff++] = byte2;\n        }\n\n        for (var i = 2; i < len; i++) buff[boff++] = data[off + i];\n      } else for (var i = 0; i < len; i++) buff[i] = data[off + i];\n\n      if (img[\"t262\"][0] == 32803 || img[\"t262\"][0] == 34892) // lossless JPEG and lossy JPEG (used in DNG files)\n        {\n          var bps = img[\"t258\"][0]; //, dcdr = new LosslessJpegDecoder();\n\n          var out = UTIF.LosslessJpegDecode(buff),\n              olen = out.length; //console.log(olen);\n\n          if (false) {} else if (bps == 16) {\n            if (img.isLE) for (var i = 0; i < olen; i++) {\n              tgt[toff + (i << 1)] = out[i] & 255;\n              tgt[toff + (i << 1) + 1] = out[i] >>> 8;\n            } else for (var i = 0; i < olen; i++) {\n              tgt[toff + (i << 1)] = out[i] >>> 8;\n              tgt[toff + (i << 1) + 1] = out[i] & 255;\n            }\n          } else if (bps == 14 || bps == 12) {\n            // 4 * 14 == 56 == 7 * 8\n            var rst = 16 - bps;\n\n            for (var i = 0; i < olen; i++) UTIF.decode._putsF(tgt, i * bps, out[i] << rst);\n          } else throw new Error(\"unsupported bit depth \" + bps);\n        } else {\n        var parser = new UTIF.JpegDecoder();\n        parser.parse(buff);\n        var decoded = parser.getData(parser.width, parser.height);\n\n        for (var i = 0; i < decoded.length; i++) tgt[toff + i] = decoded[i];\n      } // PhotometricInterpretation is 6 (YCbCr) for JPEG, but after decoding we populate data in\n      // RGB format, so updating the tag value\n\n\n      if (img[\"t262\"][0] == 6) img[\"t262\"][0] = 2;\n    };\n\n    UTIF.decode._decodeOldJPEGInit = function (img, data, off, len) {\n      var SOI = 216,\n          EOI = 217,\n          DQT = 219,\n          DHT = 196,\n          DRI = 221,\n          SOF0 = 192,\n          SOS = 218;\n      var joff = 0,\n          soff = 0,\n          tables,\n          sosMarker,\n          isTiled = false,\n          i,\n          j,\n          k;\n      var jpgIchgFmt = img[\"t513\"],\n          jifoff = jpgIchgFmt ? jpgIchgFmt[0] : 0;\n      var jpgIchgFmtLen = img[\"t514\"],\n          jiflen = jpgIchgFmtLen ? jpgIchgFmtLen[0] : 0;\n      var soffTag = img[\"t324\"] || img[\"t273\"] || jpgIchgFmt;\n      var ycbcrss = img[\"t530\"],\n          ssx = 0,\n          ssy = 0;\n      var spp = img[\"t277\"] ? img[\"t277\"][0] : 1;\n      var jpgresint = img[\"t515\"];\n\n      if (soffTag) {\n        soff = soffTag[0];\n        isTiled = soffTag.length > 1;\n      }\n\n      if (!isTiled) {\n        if (data[off] == 255 && data[off + 1] == SOI) return {\n          jpegOffset: off\n        };\n\n        if (jpgIchgFmt != null) {\n          if (data[off + jifoff] == 255 && data[off + jifoff + 1] == SOI) joff = off + jifoff;else log(\"JPEGInterchangeFormat does not point to SOI\");\n          if (jpgIchgFmtLen == null) log(\"JPEGInterchangeFormatLength field is missing\");else if (jifoff >= soff || jifoff + jiflen <= soff) log(\"JPEGInterchangeFormatLength field value is invalid\");\n          if (joff != null) return {\n            jpegOffset: joff\n          };\n        }\n      }\n\n      if (ycbcrss != null) {\n        ssx = ycbcrss[0];\n        ssy = ycbcrss[1];\n      }\n\n      if (jpgIchgFmt != null) if (jpgIchgFmtLen != null) if (jiflen >= 2 && jifoff + jiflen <= soff) {\n        if (data[off + jifoff + jiflen - 2] == 255 && data[off + jifoff + jiflen - 1] == SOI) tables = new Uint8Array(jiflen - 2);else tables = new Uint8Array(jiflen);\n\n        for (i = 0; i < tables.length; i++) tables[i] = data[off + jifoff + i];\n\n        log(\"Incorrect JPEG interchange format: using JPEGInterchangeFormat offset to derive tables\");\n      } else log(\"JPEGInterchangeFormat+JPEGInterchangeFormatLength > offset to first strip or tile\");\n\n      if (tables == null) {\n        var ooff = 0,\n            out = [];\n        out[ooff++] = 255;\n        out[ooff++] = SOI;\n        var qtables = img[\"t519\"];\n        if (qtables == null) throw new Error(\"JPEGQTables tag is missing\");\n\n        for (i = 0; i < qtables.length; i++) {\n          out[ooff++] = 255;\n          out[ooff++] = DQT;\n          out[ooff++] = 0;\n          out[ooff++] = 67;\n          out[ooff++] = i;\n\n          for (j = 0; j < 64; j++) out[ooff++] = data[off + qtables[i] + j];\n        }\n\n        for (k = 0; k < 2; k++) {\n          var htables = img[k == 0 ? \"t520\" : \"t521\"];\n          if (htables == null) throw new Error((k == 0 ? \"JPEGDCTables\" : \"JPEGACTables\") + \" tag is missing\");\n\n          for (i = 0; i < htables.length; i++) {\n            out[ooff++] = 255;\n            out[ooff++] = DHT; //out[ooff++] = 0; out[ooff++] = 67; out[ooff++] = i;\n\n            var nc = 19;\n\n            for (j = 0; j < 16; j++) nc += data[off + htables[i] + j];\n\n            out[ooff++] = nc >>> 8;\n            out[ooff++] = nc & 255;\n            out[ooff++] = i | k << 4;\n\n            for (j = 0; j < 16; j++) out[ooff++] = data[off + htables[i] + j];\n\n            for (j = 0; j < nc; j++) out[ooff++] = data[off + htables[i] + 16 + j];\n          }\n        }\n\n        out[ooff++] = 255;\n        out[ooff++] = SOF0;\n        out[ooff++] = 0;\n        out[ooff++] = 8 + 3 * spp;\n        out[ooff++] = 8;\n        out[ooff++] = img.height >>> 8 & 255;\n        out[ooff++] = img.height & 255;\n        out[ooff++] = img.width >>> 8 & 255;\n        out[ooff++] = img.width & 255;\n        out[ooff++] = spp;\n\n        if (spp == 1) {\n          out[ooff++] = 1;\n          out[ooff++] = 17;\n          out[ooff++] = 0;\n        } else for (i = 0; i < 3; i++) {\n          out[ooff++] = i + 1;\n          out[ooff++] = i != 0 ? 17 : (ssx & 15) << 4 | ssy & 15;\n          out[ooff++] = i;\n        }\n\n        if (jpgresint != null && jpgresint[0] != 0) {\n          out[ooff++] = 255;\n          out[ooff++] = DRI;\n          out[ooff++] = 0;\n          out[ooff++] = 4;\n          out[ooff++] = jpgresint[0] >>> 8 & 255;\n          out[ooff++] = jpgresint[0] & 255;\n        }\n\n        tables = new Uint8Array(out);\n      }\n\n      var sofpos = -1;\n      i = 0;\n\n      while (i < tables.length - 1) {\n        if (tables[i] == 255 && tables[i + 1] == SOF0) {\n          sofpos = i;\n          break;\n        }\n\n        i++;\n      }\n\n      if (sofpos == -1) {\n        var tmptab = new Uint8Array(tables.length + 10 + 3 * spp);\n        tmptab.set(tables);\n        var tmpoff = tables.length;\n        sofpos = tables.length;\n        tables = tmptab;\n        tables[tmpoff++] = 255;\n        tables[tmpoff++] = SOF0;\n        tables[tmpoff++] = 0;\n        tables[tmpoff++] = 8 + 3 * spp;\n        tables[tmpoff++] = 8;\n        tables[tmpoff++] = img.height >>> 8 & 255;\n        tables[tmpoff++] = img.height & 255;\n        tables[tmpoff++] = img.width >>> 8 & 255;\n        tables[tmpoff++] = img.width & 255;\n        tables[tmpoff++] = spp;\n\n        if (spp == 1) {\n          tables[tmpoff++] = 1;\n          tables[tmpoff++] = 17;\n          tables[tmpoff++] = 0;\n        } else for (i = 0; i < 3; i++) {\n          tables[tmpoff++] = i + 1;\n          tables[tmpoff++] = i != 0 ? 17 : (ssx & 15) << 4 | ssy & 15;\n          tables[tmpoff++] = i;\n        }\n      }\n\n      if (data[soff] == 255 && data[soff + 1] == SOS) {\n        var soslen = data[soff + 2] << 8 | data[soff + 3];\n        sosMarker = new Uint8Array(soslen + 2);\n        sosMarker[0] = data[soff];\n        sosMarker[1] = data[soff + 1];\n        sosMarker[2] = data[soff + 2];\n        sosMarker[3] = data[soff + 3];\n\n        for (i = 0; i < soslen - 2; i++) sosMarker[i + 4] = data[soff + i + 4];\n      } else {\n        sosMarker = new Uint8Array(2 + 6 + 2 * spp);\n        var sosoff = 0;\n        sosMarker[sosoff++] = 255;\n        sosMarker[sosoff++] = SOS;\n        sosMarker[sosoff++] = 0;\n        sosMarker[sosoff++] = 6 + 2 * spp;\n        sosMarker[sosoff++] = spp;\n\n        if (spp == 1) {\n          sosMarker[sosoff++] = 1;\n          sosMarker[sosoff++] = 0;\n        } else for (i = 0; i < 3; i++) {\n          sosMarker[sosoff++] = i + 1;\n          sosMarker[sosoff++] = i << 4 | i;\n        }\n\n        sosMarker[sosoff++] = 0;\n        sosMarker[sosoff++] = 63;\n        sosMarker[sosoff++] = 0;\n      }\n\n      return {\n        jpegOffset: off,\n        tables: tables,\n        sosMarker: sosMarker,\n        sofPosition: sofpos\n      };\n    };\n\n    UTIF.decode._decodeOldJPEG = function (img, data, off, len, tgt, toff) {\n      var i, dlen, tlen, buff, buffoff;\n\n      var jpegData = UTIF.decode._decodeOldJPEGInit(img, data, off, len);\n\n      if (jpegData.jpegOffset != null) {\n        dlen = off + len - jpegData.jpegOffset;\n        buff = new Uint8Array(dlen);\n\n        for (i = 0; i < dlen; i++) buff[i] = data[jpegData.jpegOffset + i];\n      } else {\n        tlen = jpegData.tables.length;\n        buff = new Uint8Array(tlen + jpegData.sosMarker.length + len + 2);\n        buff.set(jpegData.tables);\n        buffoff = tlen;\n        buff[jpegData.sofPosition + 5] = img.height >>> 8 & 255;\n        buff[jpegData.sofPosition + 6] = img.height & 255;\n        buff[jpegData.sofPosition + 7] = img.width >>> 8 & 255;\n        buff[jpegData.sofPosition + 8] = img.width & 255;\n\n        if (data[off] != 255 || data[off + 1] != SOS) {\n          buff.set(jpegData.sosMarker, buffoff);\n          buffoff += sosMarker.length;\n        }\n\n        for (i = 0; i < len; i++) buff[buffoff++] = data[off + i];\n\n        buff[buffoff++] = 255;\n        buff[buffoff++] = EOI;\n      }\n\n      var parser = new UTIF.JpegDecoder();\n      parser.parse(buff);\n      var decoded = parser.getData(parser.width, parser.height);\n\n      for (var i = 0; i < decoded.length; i++) tgt[toff + i] = decoded[i]; // PhotometricInterpretation is 6 (YCbCr) for JPEG, but after decoding we populate data in\n      // RGB format, so updating the tag value\n\n\n      if (img[\"t262\"] && img[\"t262\"][0] == 6) img[\"t262\"][0] = 2;\n    };\n\n    UTIF.decode._decodePackBits = function (data, off, len, tgt, toff) {\n      var sa = new Int8Array(data.buffer),\n          ta = new Int8Array(tgt.buffer),\n          lim = off + len;\n\n      while (off < lim) {\n        var n = sa[off];\n        off++;\n        if (n >= 0 && n < 128) for (var i = 0; i < n + 1; i++) {\n          ta[toff] = sa[off];\n          toff++;\n          off++;\n        }\n\n        if (n >= -127 && n < 0) {\n          for (var i = 0; i < -n + 1; i++) {\n            ta[toff] = sa[off];\n            toff++;\n          }\n\n          off++;\n        }\n      }\n    };\n\n    UTIF.decode._decodeThunder = function (data, off, len, tgt, toff) {\n      var d2 = [0, 1, 0, -1],\n          d3 = [0, 1, 2, 3, 0, -3, -2, -1];\n      var lim = off + len,\n          qoff = toff * 2,\n          px = 0;\n\n      while (off < lim) {\n        var b = data[off],\n            msk = b >>> 6,\n            n = b & 63;\n        off++;\n\n        if (msk == 3) {\n          px = n & 15;\n          tgt[qoff >>> 1] |= px << 4 * (1 - qoff & 1);\n          qoff++;\n        }\n\n        if (msk == 0) for (var i = 0; i < n; i++) {\n          tgt[qoff >>> 1] |= px << 4 * (1 - qoff & 1);\n          qoff++;\n        }\n        if (msk == 2) for (var i = 0; i < 2; i++) {\n          var d = n >>> 3 * (1 - i) & 7;\n\n          if (d != 4) {\n            px += d3[d];\n            tgt[qoff >>> 1] |= px << 4 * (1 - qoff & 1);\n            qoff++;\n          }\n        }\n        if (msk == 1) for (var i = 0; i < 3; i++) {\n          var d = n >>> 2 * (2 - i) & 3;\n\n          if (d != 2) {\n            px += d2[d];\n            tgt[qoff >>> 1] |= px << 4 * (1 - qoff & 1);\n            qoff++;\n          }\n        }\n      }\n    };\n\n    UTIF.decode._dmap = {\n      \"1\": 0,\n      \"011\": 1,\n      \"000011\": 2,\n      \"0000011\": 3,\n      \"010\": -1,\n      \"000010\": -2,\n      \"0000010\": -3\n    };\n\n    UTIF.decode._lens = function () {\n      var addKeys = function (lens, arr, i0, inc) {\n        for (var i = 0; i < arr.length; i++) lens[arr[i]] = i0 + i * inc;\n      };\n\n      var termW = \"00110101,000111,0111,1000,1011,1100,1110,1111,10011,10100,00111,01000,001000,000011,110100,110101,\" // 15\n      + \"101010,101011,0100111,0001100,0001000,0010111,0000011,0000100,0101000,0101011,0010011,0100100,0011000,00000010,00000011,00011010,\" // 31\n      + \"00011011,00010010,00010011,00010100,00010101,00010110,00010111,00101000,00101001,00101010,00101011,00101100,00101101,00000100,00000101,00001010,\" // 47\n      + \"00001011,01010010,01010011,01010100,01010101,00100100,00100101,01011000,01011001,01011010,01011011,01001010,01001011,00110010,00110011,00110100\";\n      var termB = \"0000110111,010,11,10,011,0011,0010,00011,000101,000100,0000100,0000101,0000111,00000100,00000111,000011000,\" // 15\n      + \"0000010111,0000011000,0000001000,00001100111,00001101000,00001101100,00000110111,00000101000,00000010111,00000011000,000011001010,000011001011,000011001100,000011001101,000001101000,000001101001,\" // 31\n      + \"000001101010,000001101011,000011010010,000011010011,000011010100,000011010101,000011010110,000011010111,000001101100,000001101101,000011011010,000011011011,000001010100,000001010101,000001010110,000001010111,\" // 47\n      + \"000001100100,000001100101,000001010010,000001010011,000000100100,000000110111,000000111000,000000100111,000000101000,000001011000,000001011001,000000101011,000000101100,000001011010,000001100110,000001100111\";\n      var makeW = \"11011,10010,010111,0110111,00110110,00110111,01100100,01100101,01101000,01100111,011001100,011001101,011010010,011010011,011010100,011010101,011010110,\" + \"011010111,011011000,011011001,011011010,011011011,010011000,010011001,010011010,011000,010011011\";\n      var makeB = \"0000001111,000011001000,000011001001,000001011011,000000110011,000000110100,000000110101,0000001101100,0000001101101,0000001001010,0000001001011,0000001001100,\" + \"0000001001101,0000001110010,0000001110011,0000001110100,0000001110101,0000001110110,0000001110111,0000001010010,0000001010011,0000001010100,0000001010101,0000001011010,\" + \"0000001011011,0000001100100,0000001100101\";\n      var makeA = \"00000001000,00000001100,00000001101,000000010010,000000010011,000000010100,000000010101,000000010110,000000010111,000000011100,000000011101,000000011110,000000011111\";\n      termW = termW.split(\",\");\n      termB = termB.split(\",\");\n      makeW = makeW.split(\",\");\n      makeB = makeB.split(\",\");\n      makeA = makeA.split(\",\");\n      var lensW = {},\n          lensB = {};\n      addKeys(lensW, termW, 0, 1);\n      addKeys(lensW, makeW, 64, 64);\n      addKeys(lensW, makeA, 1792, 64);\n      addKeys(lensB, termB, 0, 1);\n      addKeys(lensB, makeB, 64, 64);\n      addKeys(lensB, makeA, 1792, 64);\n      return [lensW, lensB];\n    }();\n\n    UTIF.decode._decodeG4 = function (data, off, slen, tgt, toff, w, fo) {\n      var U = UTIF.decode,\n          boff = off << 3,\n          len = 0,\n          wrd = \"\"; // previous starts with 1\n\n      var line = [],\n          pline = [];\n\n      for (var i = 0; i < w; i++) pline.push(0);\n\n      pline = U._makeDiff(pline);\n      var a0 = 0,\n          a1 = 0,\n          a2 = 0,\n          b1 = 0,\n          b2 = 0,\n          clr = 0;\n      var y = 0,\n          mode = \"\",\n          toRead = 0;\n      var bipl = Math.ceil(w / 8) * 8;\n\n      while (boff >>> 3 < off + slen) {\n        b1 = U._findDiff(pline, a0 + (a0 == 0 ? 0 : 1), 1 - clr), b2 = U._findDiff(pline, b1, clr); // could be precomputed\n\n        var bit = 0;\n        if (fo == 1) bit = data[boff >>> 3] >>> 7 - (boff & 7) & 1;\n        if (fo == 2) bit = data[boff >>> 3] >>> (boff & 7) & 1;\n        boff++;\n        wrd += bit;\n\n        if (mode == \"H\") {\n          if (U._lens[clr][wrd] != null) {\n            var dl = U._lens[clr][wrd];\n            wrd = \"\";\n            len += dl;\n\n            if (dl < 64) {\n              U._addNtimes(line, len, clr);\n\n              a0 += len;\n              clr = 1 - clr;\n              len = 0;\n              toRead--;\n              if (toRead == 0) mode = \"\";\n            }\n          }\n        } else {\n          if (wrd == \"0001\") {\n            wrd = \"\";\n\n            U._addNtimes(line, b2 - a0, clr);\n\n            a0 = b2;\n          }\n\n          if (wrd == \"001\") {\n            wrd = \"\";\n            mode = \"H\";\n            toRead = 2;\n          }\n\n          if (U._dmap[wrd] != null) {\n            a1 = b1 + U._dmap[wrd];\n\n            U._addNtimes(line, a1 - a0, clr);\n\n            a0 = a1;\n            wrd = \"\";\n            clr = 1 - clr;\n          }\n        }\n\n        if (line.length == w && mode == \"\") {\n          U._writeBits(line, tgt, toff * 8 + y * bipl);\n\n          clr = 0;\n          y++;\n          a0 = 0;\n          pline = U._makeDiff(line);\n          line = [];\n        } //if(wrd.length>150) {  log(wrd);  break;  throw \"e\";  }\n\n      }\n    };\n\n    UTIF.decode._findDiff = function (line, x, clr) {\n      for (var i = 0; i < line.length; i += 2) if (line[i] >= x && line[i + 1] == clr) return line[i];\n    };\n\n    UTIF.decode._makeDiff = function (line) {\n      var out = [];\n      if (line[0] == 1) out.push(0, 1);\n\n      for (var i = 1; i < line.length; i++) if (line[i - 1] != line[i]) out.push(i, line[i]);\n\n      out.push(line.length, 0, line.length, 1);\n      return out;\n    };\n\n    UTIF.decode._decodeG3 = function (data, off, slen, tgt, toff, w, fo) {\n      var U = UTIF.decode,\n          boff = off << 3,\n          len = 0,\n          wrd = \"\";\n      var line = [],\n          pline = [];\n\n      for (var i = 0; i < w; i++) line.push(0);\n\n      var a0 = 0,\n          a1 = 0,\n          a2 = 0,\n          b1 = 0,\n          b2 = 0,\n          clr = 0;\n      var y = -1,\n          mode = \"\",\n          toRead = 0,\n          is1D = false;\n      var bipl = Math.ceil(w / 8) * 8;\n\n      while (boff >>> 3 < off + slen) {\n        b1 = U._findDiff(pline, a0 + (a0 == 0 ? 0 : 1), 1 - clr), b2 = U._findDiff(pline, b1, clr); // could be precomputed\n\n        var bit = 0;\n        if (fo == 1) bit = data[boff >>> 3] >>> 7 - (boff & 7) & 1;\n        if (fo == 2) bit = data[boff >>> 3] >>> (boff & 7) & 1;\n        boff++;\n        wrd += bit;\n\n        if (is1D) {\n          if (U._lens[clr][wrd] != null) {\n            var dl = U._lens[clr][wrd];\n            wrd = \"\";\n            len += dl;\n\n            if (dl < 64) {\n              U._addNtimes(line, len, clr);\n\n              clr = 1 - clr;\n              len = 0;\n            }\n          }\n        } else {\n          if (mode == \"H\") {\n            if (U._lens[clr][wrd] != null) {\n              var dl = U._lens[clr][wrd];\n              wrd = \"\";\n              len += dl;\n\n              if (dl < 64) {\n                U._addNtimes(line, len, clr);\n\n                a0 += len;\n                clr = 1 - clr;\n                len = 0;\n                toRead--;\n                if (toRead == 0) mode = \"\";\n              }\n            }\n          } else {\n            if (wrd == \"0001\") {\n              wrd = \"\";\n\n              U._addNtimes(line, b2 - a0, clr);\n\n              a0 = b2;\n            }\n\n            if (wrd == \"001\") {\n              wrd = \"\";\n              mode = \"H\";\n              toRead = 2;\n            }\n\n            if (U._dmap[wrd] != null) {\n              a1 = b1 + U._dmap[wrd];\n\n              U._addNtimes(line, a1 - a0, clr);\n\n              a0 = a1;\n              wrd = \"\";\n              clr = 1 - clr;\n            }\n          }\n        }\n\n        if (wrd.endsWith(\"000000000001\")) // needed for some files\n          {\n            if (y >= 0) U._writeBits(line, tgt, toff * 8 + y * bipl);\n            if (fo == 1) is1D = (data[boff >>> 3] >>> 7 - (boff & 7) & 1) == 1;\n            if (fo == 2) is1D = (data[boff >>> 3] >>> (boff & 7) & 1) == 1;\n            boff++;\n            if (U._decodeG3.allow2D == null) U._decodeG3.allow2D = is1D;\n\n            if (!U._decodeG3.allow2D) {\n              is1D = true;\n              boff--;\n            } //log(\"EOL\",y, \"next 1D:\", is1D);\n\n\n            wrd = \"\";\n            clr = 0;\n            y++;\n            a0 = 0;\n            pline = U._makeDiff(line);\n            line = [];\n          }\n      }\n\n      if (line.length == w) U._writeBits(line, tgt, toff * 8 + y * bipl);\n    };\n\n    UTIF.decode._addNtimes = function (arr, n, val) {\n      for (var i = 0; i < n; i++) arr.push(val);\n    };\n\n    UTIF.decode._writeBits = function (bits, tgt, boff) {\n      for (var i = 0; i < bits.length; i++) tgt[boff + i >>> 3] |= bits[i] << 7 - (boff + i & 7);\n    };\n\n    UTIF.decode._decodeLZW = function (data, off, tgt, toff) {\n      if (UTIF.decode._lzwTab == null) {\n        var tb = new Uint32Array(0xffff),\n            tn = new Uint16Array(0xffff),\n            chr = new Uint8Array(2e6);\n\n        for (var i = 0; i < 256; i++) {\n          chr[i << 2] = i;\n          tb[i] = i << 2;\n          tn[i] = 1;\n        }\n\n        UTIF.decode._lzwTab = [tb, tn, chr];\n      }\n\n      var copy = UTIF.decode._copyData;\n      var tab = UTIF.decode._lzwTab[0],\n          tln = UTIF.decode._lzwTab[1],\n          chr = UTIF.decode._lzwTab[2],\n          totl = 258,\n          chrl = 258 << 2;\n      var bits = 9,\n          boff = off << 3; // offset in bits\n\n      var ClearCode = 256,\n          EoiCode = 257;\n      var v = 0,\n          Code = 0,\n          OldCode = 0;\n\n      while (true) {\n        v = data[boff >>> 3] << 16 | data[boff + 8 >>> 3] << 8 | data[boff + 16 >>> 3];\n        Code = v >> 24 - (boff & 7) - bits & (1 << bits) - 1;\n        boff += bits;\n        if (Code == EoiCode) break;\n\n        if (Code == ClearCode) {\n          bits = 9;\n          totl = 258;\n          chrl = 258 << 2;\n          v = data[boff >>> 3] << 16 | data[boff + 8 >>> 3] << 8 | data[boff + 16 >>> 3];\n          Code = v >> 24 - (boff & 7) - bits & (1 << bits) - 1;\n          boff += bits;\n          if (Code == EoiCode) break;\n          tgt[toff] = Code;\n          toff++;\n        } else if (Code < totl) {\n          var cd = tab[Code],\n              cl = tln[Code];\n          copy(chr, cd, tgt, toff, cl);\n          toff += cl;\n\n          if (OldCode >= totl) {\n            tab[totl] = chrl;\n            chr[tab[totl]] = cd[0];\n            tln[totl] = 1;\n            chrl = chrl + 1 + 3 & ~0x03;\n            totl++;\n          } else {\n            tab[totl] = chrl;\n            var nit = tab[OldCode],\n                nil = tln[OldCode];\n            copy(chr, nit, chr, chrl, nil);\n            chr[chrl + nil] = chr[cd];\n            nil++;\n            tln[totl] = nil;\n            totl++;\n            chrl = chrl + nil + 3 & ~0x03;\n          }\n\n          if (totl + 1 == 1 << bits) bits++;\n        } else {\n          if (OldCode >= totl) {\n            tab[totl] = chrl;\n            tln[totl] = 0;\n            totl++;\n          } else {\n            tab[totl] = chrl;\n            var nit = tab[OldCode],\n                nil = tln[OldCode];\n            copy(chr, nit, chr, chrl, nil);\n            chr[chrl + nil] = chr[chrl];\n            nil++;\n            tln[totl] = nil;\n            totl++;\n            copy(chr, chrl, tgt, toff, nil);\n            toff += nil;\n            chrl = chrl + nil + 3 & ~0x03;\n          }\n\n          if (totl + 1 == 1 << bits) bits++;\n        }\n\n        OldCode = Code;\n      }\n    };\n\n    UTIF.decode._copyData = function (s, so, t, to, l) {\n      for (var i = 0; i < l; i += 4) {\n        t[to + i] = s[so + i];\n        t[to + i + 1] = s[so + i + 1];\n        t[to + i + 2] = s[so + i + 2];\n        t[to + i + 3] = s[so + i + 3];\n      }\n    };\n\n    UTIF.tags = {};\n    UTIF.ttypes = {\n      256: 3,\n      257: 3,\n      258: 3,\n      259: 3,\n      262: 3,\n      273: 4,\n      274: 3,\n      277: 3,\n      278: 4,\n      279: 4,\n      282: 5,\n      283: 5,\n      284: 3,\n      286: 5,\n      287: 5,\n      296: 3,\n      305: 2,\n      306: 2,\n      338: 3,\n      513: 4,\n      514: 4,\n      34665: 4\n    };\n\n    UTIF._readIFD = function (bin, data, offset, ifds, depth, debug) {\n      var cnt = bin.readUshort(data, offset);\n      offset += 2;\n      var ifd = {};\n      ifds.push(ifd);\n      if (debug) log(\"   \".repeat(depth), ifds.length - 1, \">>>----------------\");\n\n      for (var i = 0; i < cnt; i++) {\n        var tag = bin.readUshort(data, offset);\n        offset += 2;\n        var type = bin.readUshort(data, offset);\n        offset += 2;\n        var num = bin.readUint(data, offset);\n        offset += 4;\n        var voff = bin.readUint(data, offset);\n        offset += 4; //if(tag==33723) {type=1; num*=4;}//console.log(type,num,voff);//type = 1;  // IPTC/NAA\n\n        var arr = []; //ifd[\"t\"+tag+\"-\"+UTIF.tags[tag]] = arr;\n\n        if (type == 1 || type == 7) {\n          arr = new Uint8Array(data.buffer, num < 5 ? offset - 4 : voff, num);\n        }\n\n        if (type == 2) {\n          var o0 = num < 5 ? offset - 4 : voff,\n              c = data[o0];\n          if (c < 128) arr.push(bin.readASCII(data, o0, num - 1));else arr = new Uint8Array(data.buffer, o0, num - 1);\n        }\n\n        if (type == 3) {\n          for (var j = 0; j < num; j++) arr.push(bin.readUshort(data, (num < 3 ? offset - 4 : voff) + 2 * j));\n        }\n\n        if (type == 4) {\n          for (var j = 0; j < num; j++) arr.push(bin.readUint(data, (num < 2 ? offset - 4 : voff) + 4 * j));\n        }\n\n        if (type == 5) {\n          for (var j = 0; j < num; j++) arr.push(bin.readUint(data, voff + j * 8) / bin.readUint(data, voff + j * 8 + 4));\n        }\n\n        if (type == 8) {\n          for (var j = 0; j < num; j++) arr.push(bin.readShort(data, (num < 3 ? offset - 4 : voff) + 2 * j));\n        }\n\n        if (type == 9) {\n          for (var j = 0; j < num; j++) arr.push(bin.readInt(data, (num < 2 ? offset - 4 : voff) + 4 * j));\n        }\n\n        if (type == 10) {\n          for (var j = 0; j < num; j++) arr.push(bin.readInt(data, voff + j * 8) / bin.readInt(data, voff + j * 8 + 4));\n        }\n\n        if (type == 11) {\n          for (var j = 0; j < num; j++) arr.push(bin.readFloat(data, voff + j * 4));\n        }\n\n        if (type == 12) {\n          for (var j = 0; j < num; j++) arr.push(bin.readDouble(data, voff + j * 8));\n        }\n\n        ifd[\"t\" + tag] = arr;\n\n        if (num != 0 && arr.length == 0) {\n          log(\"unknown TIFF tag type: \", type, \"num:\", num);\n        }\n\n        if (debug) log(\"   \".repeat(depth), tag, type, UTIF.tags[tag], arr);\n\n        if (tag == 330 && ifd[\"t272\"] && ifd[\"t272\"][0] == \"DSLR-A100\") {} // ifd[\"t258\"]=[12];  ifd[\"t259\"]=[32767];  ifd[\"t273\"]=[offset+arr[0]];  ifd[\"t277\"]=[1];  ifd[\"t279\"]=[1];  ifd[\"t33421\"]=[2,2];  ifd[\"t33422\"]=[0,1,1,2];\n        else if (tag == 330 || tag == 34665 || tag == 50740 && bin.readUshort(data, bin.readUint(arr, 0)) < 300) {\n            var oarr = tag == 50740 ? [bin.readUint(arr, 0)] : arr;\n            var subfd = [];\n\n            for (var j = 0; j < oarr.length; j++) UTIF._readIFD(bin, data, oarr[j], subfd, depth + 1, debug);\n\n            if (tag == 330) ifd.subIFD = subfd;\n            if (tag == 34665) ifd.exifIFD = subfd[0];\n            if (tag == 50740) ifd.dngPrvt = subfd[0];\n          }\n\n        if (tag == 37500) {\n          var mn = arr; //console.log(bin.readASCII(mn,0,mn.length), mn);\n\n          if (bin.readASCII(mn, 0, 5) == \"Nikon\") ifd.makerNote = UTIF[\"decode\"](mn.slice(10).buffer)[0];else if (bin.readUshort(data, voff) < 300) {\n            var subsub = [];\n\n            UTIF._readIFD(bin, data, voff, subsub, depth + 1, debug);\n\n            ifd.makerNote = subsub[0];\n          }\n        }\n      }\n\n      if (debug) log(\"   \".repeat(depth), \"<<<---------------\");\n      return offset;\n    };\n\n    UTIF._writeIFD = function (bin, data, offset, ifd) {\n      var keys = Object.keys(ifd);\n      bin.writeUshort(data, offset, keys.length);\n      offset += 2;\n      var eoff = offset + keys.length * 12 + 4;\n\n      for (var ki = 0; ki < keys.length; ki++) {\n        var key = keys[ki];\n        var tag = parseInt(key.slice(1)),\n            type = UTIF.ttypes[tag];\n        if (type == null) throw new Error(\"unknown type of tag: \" + tag);\n        var val = ifd[key];\n        if (type == 2) val = val[0] + \"\\u0000\";\n        var num = val.length;\n        bin.writeUshort(data, offset, tag);\n        offset += 2;\n        bin.writeUshort(data, offset, type);\n        offset += 2;\n        bin.writeUint(data, offset, num);\n        offset += 4;\n        var dlen = [-1, 1, 1, 2, 4, 8, 0, 0, 0, 0, 0, 0, 8][type] * num;\n        var toff = offset;\n\n        if (dlen > 4) {\n          bin.writeUint(data, offset, eoff);\n          toff = eoff;\n        }\n\n        if (type == 2) {\n          bin.writeASCII(data, toff, val);\n        }\n\n        if (type == 3) {\n          for (var i = 0; i < num; i++) bin.writeUshort(data, toff + 2 * i, val[i]);\n        }\n\n        if (type == 4) {\n          for (var i = 0; i < num; i++) bin.writeUint(data, toff + 4 * i, val[i]);\n        }\n\n        if (type == 5) {\n          for (var i = 0; i < num; i++) {\n            bin.writeUint(data, toff + 8 * i, Math.round(val[i] * 10000));\n            bin.writeUint(data, toff + 8 * i + 4, 10000);\n          }\n        }\n\n        if (type == 12) {\n          for (var i = 0; i < num; i++) bin.writeDouble(data, toff + 8 * i, val[i]);\n        }\n\n        if (dlen > 4) {\n          dlen += dlen & 1;\n          eoff += dlen;\n        }\n\n        offset += 4;\n      }\n\n      return [offset, eoff];\n    };\n\n    UTIF.toRGBA8 = function (out) {\n      var w = out.width,\n          h = out.height,\n          area = w * h,\n          qarea = area * 4,\n          data = out.data;\n      var img = new Uint8Array(area * 4); //console.log(out);\n      // 0: WhiteIsZero, 1: BlackIsZero, 2: RGB, 3: Palette color, 4: Transparency mask, 5: CMYK\n\n      var intp = out[\"t262\"] ? out[\"t262\"][0] : 2,\n          bps = out[\"t258\"] ? Math.min(32, out[\"t258\"][0]) : 1; //log(\"interpretation: \", intp, \"bps\", bps, out);\n\n      if (false) {} else if (intp == 0) {\n        var bpl = Math.ceil(bps * w / 8);\n\n        for (var y = 0; y < h; y++) {\n          var off = y * bpl,\n              io = y * w;\n          if (bps == 1) for (var i = 0; i < w; i++) {\n            var qi = io + i << 2,\n                px = data[off + (i >> 3)] >> 7 - (i & 7) & 1;\n            img[qi] = img[qi + 1] = img[qi + 2] = (1 - px) * 255;\n            img[qi + 3] = 255;\n          }\n          if (bps == 4) for (var i = 0; i < w; i++) {\n            var qi = io + i << 2,\n                px = data[off + (i >> 1)] >> 4 - 4 * (i & 1) & 15;\n            img[qi] = img[qi + 1] = img[qi + 2] = (15 - px) * 17;\n            img[qi + 3] = 255;\n          }\n          if (bps == 8) for (var i = 0; i < w; i++) {\n            var qi = io + i << 2,\n                px = data[off + i];\n            img[qi] = img[qi + 1] = img[qi + 2] = 255 - px;\n            img[qi + 3] = 255;\n          }\n        }\n      } else if (intp == 1) {\n        var bpl = Math.ceil(bps * w / 8);\n\n        for (var y = 0; y < h; y++) {\n          var off = y * bpl,\n              io = y * w;\n          if (bps == 1) for (var i = 0; i < w; i++) {\n            var qi = io + i << 2,\n                px = data[off + (i >> 3)] >> 7 - (i & 7) & 1;\n            img[qi] = img[qi + 1] = img[qi + 2] = px * 255;\n            img[qi + 3] = 255;\n          }\n          if (bps == 2) for (var i = 0; i < w; i++) {\n            var qi = io + i << 2,\n                px = data[off + (i >> 2)] >> 6 - 2 * (i & 3) & 3;\n            img[qi] = img[qi + 1] = img[qi + 2] = px * 85;\n            img[qi + 3] = 255;\n          }\n          if (bps == 8) for (var i = 0; i < w; i++) {\n            var qi = io + i << 2,\n                px = data[off + i];\n            img[qi] = img[qi + 1] = img[qi + 2] = px;\n            img[qi + 3] = 255;\n          }\n          if (bps == 16) for (var i = 0; i < w; i++) {\n            var qi = io + i << 2,\n                px = data[off + (2 * i + 1)];\n            img[qi] = img[qi + 1] = img[qi + 2] = Math.min(255, px);\n            img[qi + 3] = 255;\n          } // ladoga.tif\n        }\n      } else if (intp == 2) {\n        var smpls = out[\"t258\"] ? out[\"t258\"].length : 3;\n\n        if (bps == 8) {\n          if (smpls == 4) for (var i = 0; i < qarea; i++) img[i] = data[i];\n          if (smpls == 3) for (var i = 0; i < area; i++) {\n            var qi = i << 2,\n                ti = i * 3;\n            img[qi] = data[ti];\n            img[qi + 1] = data[ti + 1];\n            img[qi + 2] = data[ti + 2];\n            img[qi + 3] = 255;\n          }\n        } else {\n          // 3x 16-bit channel\n          if (smpls == 4) for (var i = 0; i < area; i++) {\n            var qi = i << 2,\n                ti = i * 8 + 1;\n            img[qi] = data[ti];\n            img[qi + 1] = data[ti + 2];\n            img[qi + 2] = data[ti + 4];\n            img[qi + 3] = data[ti + 6];\n          }\n          if (smpls == 3) for (var i = 0; i < area; i++) {\n            var qi = i << 2,\n                ti = i * 6 + 1;\n            img[qi] = data[ti];\n            img[qi + 1] = data[ti + 2];\n            img[qi + 2] = data[ti + 4];\n            img[qi + 3] = 255;\n          }\n        }\n      } else if (intp == 3) {\n        var map = out[\"t320\"];\n\n        for (var i = 0; i < area; i++) {\n          var qi = i << 2,\n              mi = data[i];\n          img[qi] = map[mi] >> 8;\n          img[qi + 1] = map[256 + mi] >> 8;\n          img[qi + 2] = map[512 + mi] >> 8;\n          img[qi + 3] = 255;\n        }\n      } else if (intp == 5) {\n        var smpls = out[\"t258\"] ? out[\"t258\"].length : 4;\n        var gotAlpha = smpls > 4 ? 1 : 0;\n\n        for (var i = 0; i < area; i++) {\n          var qi = i << 2,\n              si = i * smpls;\n          var C = 255 - data[si],\n              M = 255 - data[si + 1],\n              Y = 255 - data[si + 2],\n              K = (255 - data[si + 3]) * (1 / 255);\n          img[qi] = ~~(C * K + 0.5);\n          img[qi + 1] = ~~(M * K + 0.5);\n          img[qi + 2] = ~~(Y * K + 0.5);\n          img[qi + 3] = 255 * (1 - gotAlpha) + data[si + 4] * gotAlpha;\n        }\n      } else log(\"Unknown Photometric interpretation: \" + intp);\n\n      return img;\n    };\n\n    UTIF.replaceIMG = function (imgs) {\n      if (imgs == null) imgs = document.getElementsByTagName(\"img\");\n      var sufs = [\"tif\", \"tiff\", \"dng\", \"cr2\", \"nef\"];\n\n      for (var i = 0; i < imgs.length; i++) {\n        var img = imgs[i],\n            src = img.getAttribute(\"src\");\n        if (src == null) continue;\n        var suff = src.split(\".\").pop().toLowerCase();\n        if (sufs.indexOf(suff) == -1) continue;\n        var xhr = new XMLHttpRequest();\n\n        UTIF._xhrs.push(xhr);\n\n        UTIF._imgs.push(img);\n\n        xhr.open(\"GET\", src);\n        xhr.responseType = \"arraybuffer\";\n        xhr.onload = UTIF._imgLoaded;\n        xhr.send();\n      }\n    };\n\n    UTIF._xhrs = [];\n    UTIF._imgs = [];\n\n    UTIF._imgLoaded = function (e) {\n      var buff = e.target.response;\n      var ifds = UTIF.decode(buff); //console.log(ifds);\n\n      var vsns = ifds,\n          ma = 0,\n          page = vsns[0];\n      if (ifds[0].subIFD) vsns = vsns.concat(ifds[0].subIFD);\n\n      for (var i = 0; i < vsns.length; i++) {\n        var img = vsns[i];\n        if (img[\"t258\"] == null || img[\"t258\"].length < 3) continue;\n        var ar = img[\"t256\"] * img[\"t257\"];\n\n        if (ar > ma) {\n          ma = ar;\n          page = img;\n        }\n      }\n\n      UTIF.decodeImage(buff, page, ifds);\n      var rgba = UTIF.toRGBA8(page),\n          w = page.width,\n          h = page.height;\n\n      var ind = UTIF._xhrs.indexOf(e.target),\n          img = UTIF._imgs[ind];\n\n      UTIF._xhrs.splice(ind, 1);\n\n      UTIF._imgs.splice(ind, 1);\n\n      var cnv = document.createElement(\"canvas\");\n      cnv.width = w;\n      cnv.height = h;\n      var ctx = cnv.getContext(\"2d\"),\n          imgd = ctx.createImageData(w, h);\n\n      for (var i = 0; i < rgba.length; i++) imgd.data[i] = rgba[i];\n\n      ctx.putImageData(imgd, 0, 0);\n      img.setAttribute(\"src\", cnv.toDataURL());\n    };\n\n    UTIF._binBE = {\n      nextZero: function (data, o) {\n        while (data[o] != 0) o++;\n\n        return o;\n      },\n      readUshort: function (buff, p) {\n        return buff[p] << 8 | buff[p + 1];\n      },\n      readShort: function (buff, p) {\n        var a = UTIF._binBE.ui8;\n        a[0] = buff[p + 1];\n        a[1] = buff[p + 0];\n        return UTIF._binBE.i16[0];\n      },\n      readInt: function (buff, p) {\n        var a = UTIF._binBE.ui8;\n        a[0] = buff[p + 3];\n        a[1] = buff[p + 2];\n        a[2] = buff[p + 1];\n        a[3] = buff[p + 0];\n        return UTIF._binBE.i32[0];\n      },\n      readUint: function (buff, p) {\n        var a = UTIF._binBE.ui8;\n        a[0] = buff[p + 3];\n        a[1] = buff[p + 2];\n        a[2] = buff[p + 1];\n        a[3] = buff[p + 0];\n        return UTIF._binBE.ui32[0];\n      },\n      readASCII: function (buff, p, l) {\n        var s = \"\";\n\n        for (var i = 0; i < l; i++) s += String.fromCharCode(buff[p + i]);\n\n        return s;\n      },\n      readFloat: function (buff, p) {\n        var a = UTIF._binBE.ui8;\n\n        for (var i = 0; i < 4; i++) a[i] = buff[p + 3 - i];\n\n        return UTIF._binBE.fl32[0];\n      },\n      readDouble: function (buff, p) {\n        var a = UTIF._binBE.ui8;\n\n        for (var i = 0; i < 8; i++) a[i] = buff[p + 7 - i];\n\n        return UTIF._binBE.fl64[0];\n      },\n      writeUshort: function (buff, p, n) {\n        buff[p] = n >> 8 & 255;\n        buff[p + 1] = n & 255;\n      },\n      writeUint: function (buff, p, n) {\n        buff[p] = n >> 24 & 255;\n        buff[p + 1] = n >> 16 & 255;\n        buff[p + 2] = n >> 8 & 255;\n        buff[p + 3] = n >> 0 & 255;\n      },\n      writeASCII: function (buff, p, s) {\n        for (var i = 0; i < s.length; i++) buff[p + i] = s.charCodeAt(i);\n      },\n      writeDouble: function (buff, p, n) {\n        UTIF._binBE.fl64[0] = n;\n\n        for (var i = 0; i < 8; i++) buff[p + i] = UTIF._binBE.ui8[7 - i];\n      }\n    };\n    UTIF._binBE.ui8 = new Uint8Array(8);\n    UTIF._binBE.i16 = new Int16Array(UTIF._binBE.ui8.buffer);\n    UTIF._binBE.i32 = new Int32Array(UTIF._binBE.ui8.buffer);\n    UTIF._binBE.ui32 = new Uint32Array(UTIF._binBE.ui8.buffer);\n    UTIF._binBE.fl32 = new Float32Array(UTIF._binBE.ui8.buffer);\n    UTIF._binBE.fl64 = new Float64Array(UTIF._binBE.ui8.buffer);\n    UTIF._binLE = {\n      nextZero: UTIF._binBE.nextZero,\n      readUshort: function (buff, p) {\n        return buff[p + 1] << 8 | buff[p];\n      },\n      readShort: function (buff, p) {\n        var a = UTIF._binBE.ui8;\n        a[0] = buff[p + 0];\n        a[1] = buff[p + 1];\n        return UTIF._binBE.i16[0];\n      },\n      readInt: function (buff, p) {\n        var a = UTIF._binBE.ui8;\n        a[0] = buff[p + 0];\n        a[1] = buff[p + 1];\n        a[2] = buff[p + 2];\n        a[3] = buff[p + 3];\n        return UTIF._binBE.i32[0];\n      },\n      readUint: function (buff, p) {\n        var a = UTIF._binBE.ui8;\n        a[0] = buff[p + 0];\n        a[1] = buff[p + 1];\n        a[2] = buff[p + 2];\n        a[3] = buff[p + 3];\n        return UTIF._binBE.ui32[0];\n      },\n      readASCII: UTIF._binBE.readASCII,\n      readFloat: function (buff, p) {\n        var a = UTIF._binBE.ui8;\n\n        for (var i = 0; i < 4; i++) a[i] = buff[p + i];\n\n        return UTIF._binBE.fl32[0];\n      },\n      readDouble: function (buff, p) {\n        var a = UTIF._binBE.ui8;\n\n        for (var i = 0; i < 8; i++) a[i] = buff[p + i];\n\n        return UTIF._binBE.fl64[0];\n      }\n    };\n\n    UTIF._copyTile = function (tb, tw, th, b, w, h, xoff, yoff) {\n      //log(\"copyTile\", tw, th,  w, h, xoff, yoff);\n      var xlim = Math.min(tw, w - xoff);\n      var ylim = Math.min(th, h - yoff);\n\n      for (var y = 0; y < ylim; y++) {\n        var tof = (yoff + y) * w + xoff;\n        var sof = y * tw;\n\n        for (var x = 0; x < xlim; x++) b[tof + x] = tb[sof + x];\n      }\n    };\n\n    UTIF.LosslessJpegDecode = function () {\n      function t(Z) {\n        this.w = Z;\n        this.N = 0;\n        this._ = 0;\n        this.G = 0;\n      }\n\n      t.prototype = {\n        t: function (Z) {\n          this.N = Math.max(0, Math.min(this.w.length, Z));\n        },\n        i: function () {\n          return this.w[this.N++];\n        },\n        l: function () {\n          var Z = this.N;\n          this.N += 2;\n          return this.w[Z] << 8 | this.w[Z + 1];\n        },\n        J: function () {\n          if (this._ == 0) {\n            this.G = this.w[this.N];\n            this.N += 1 + (this.G + 1 >>> 8);\n            this._ = 8;\n          }\n\n          return this.G >>> --this._ & 1;\n        },\n        Z: function (Z) {\n          var X = this._,\n              s = this.G,\n              E = Math.min(X, Z);\n          Z -= E;\n          X -= E;\n          var Y = s >>> X & (1 << E) - 1;\n\n          while (Z > 0) {\n            s = this.w[this.N];\n            this.N += 1 + (s + 1 >>> 8);\n            E = Math.min(8, Z);\n            Z -= E;\n            X = 8 - E;\n            Y <<= E;\n            Y |= s >>> X & (1 << E) - 1;\n          }\n\n          this._ = X;\n          this.G = s;\n          return Y;\n        }\n      };\n      var i = {};\n\n      i.X = function () {\n        return [0, 0, -1];\n      };\n\n      i.s = function (Z, X, s) {\n        Z[i.Y(Z, 0, s) + 2] = X;\n      };\n\n      i.Y = function (Z, X, s) {\n        if (Z[X + 2] != -1) return 0;\n        if (s == 0) return X;\n\n        for (var E = 0; E < 2; E++) {\n          if (Z[X + E] == 0) {\n            Z[X + E] = Z.length;\n            Z.push(0);\n            Z.push(0);\n            Z.push(-1);\n          }\n\n          var Y = i.Y(Z, Z[X + E], s - 1);\n          if (Y != 0) return Y;\n        }\n\n        return 0;\n      };\n\n      i.B = function (Z, X) {\n        var s = 0,\n            E = 0,\n            Y = 0,\n            B = X._,\n            $ = X.G,\n            e = X.N;\n\n        while (!0) {\n          if (B == 0) {\n            $ = X.w[e];\n            e += 1 + ($ + 1 >>> 8);\n            B = 8;\n          }\n\n          Y = $ >>> --B & 1;\n          s = Z[s + Y];\n          E = Z[s + 2];\n\n          if (E != -1) {\n            X._ = B;\n            X.G = $;\n            X.N = e;\n            return E;\n          }\n        }\n\n        return -1;\n      };\n\n      function l(Z) {\n        this.z = new t(Z);\n        this.D(this.z);\n      }\n\n      l.prototype = {\n        $: function (Z, X) {\n          this.Q = Z.i();\n          this.F = Z.l();\n          this.o = Z.l();\n          var s = this.O = Z.i();\n          this.L = [];\n\n          for (var E = 0; E < s; E++) {\n            var Y = Z.i(),\n                B = Z.i();\n            Z.i();\n            this.L[Y] = E;\n          }\n\n          Z.t(Z.N + X - (6 + s * 3));\n        },\n        e: function () {\n          var Z = 0,\n              X = this.z.i();\n          if (this.H == null) this.H = {};\n          var s = this.H[X] = i.X(),\n              E = [];\n\n          for (var Y = 0; Y < 16; Y++) {\n            E[Y] = this.z.i();\n            Z += E[Y];\n          }\n\n          for (var Y = 0; Y < 16; Y++) for (var B = 0; B < E[Y]; B++) i.s(s, this.z.i(), Y + 1);\n\n          return Z + 17;\n        },\n        W: function (Z) {\n          while (Z > 0) Z -= this.e();\n        },\n        p: function (Z, X) {\n          var s = Z.i();\n\n          if (!this.U) {\n            this.U = [];\n          }\n\n          for (var E = 0; E < s; E++) {\n            var Y = Z.i(),\n                B = Z.i();\n            this.U[this.L[Y]] = this.H[B >>> 4];\n          }\n\n          this.g = Z.i();\n          Z.t(Z.N + X - (2 + s * 2));\n        },\n        D: function (Z) {\n          var X = !1,\n              s = Z.l();\n          if (s !== l.q) return;\n\n          do {\n            var s = Z.l(),\n                E = Z.l() - 2;\n\n            switch (s) {\n              case l.m:\n                this.$(Z, E);\n                break;\n\n              case l.K:\n                this.W(E);\n                break;\n\n              case l.V:\n                this.p(Z, E);\n                X = !0;\n                break;\n\n              default:\n                Z.t(Z.N + E);\n                break;\n            }\n          } while (!X);\n        },\n        I: function (Z, X) {\n          var s = i.B(X, Z);\n          if (s == 16) return -32768;\n          var E = Z.Z(s);\n          if ((E & 1 << s - 1) == 0) E -= (1 << s) - 1;\n          return E;\n        },\n        B: function (Z, X) {\n          var s = this.z,\n              E = this.O,\n              Y = this.F,\n              B = this.I,\n              $ = this.g,\n              e = this.o * E,\n              W = this.U;\n\n          for (var p = 0; p < E; p++) {\n            Z[p] = B(s, W[p]) + (1 << this.Q - 1);\n          }\n\n          for (var D = E; D < e; D += E) {\n            for (var p = 0; p < E; p++) Z[D + p] = B(s, W[p]) + Z[D + p - E];\n          }\n\n          var I = X;\n\n          for (var m = 1; m < Y; m++) {\n            for (var p = 0; p < E; p++) {\n              Z[I + p] = B(s, W[p]) + Z[I + p - X];\n            }\n\n            for (var D = E; D < e; D += E) {\n              for (var p = 0; p < E; p++) {\n                var K = I + D + p,\n                    q = Z[K - E];\n                if ($ == 6) q = Z[K - X] + (q - Z[K - E - X] >>> 1);\n                Z[K] = q + B(s, W[p]);\n              }\n            }\n\n            I += X;\n          }\n        }\n      };\n      l.m = 65475;\n      l.K = 65476;\n      l.q = 65496;\n      l.V = 65498;\n\n      function J(Z) {\n        var X = new l(Z),\n            s = X.Q > 8 ? Uint16Array : Uint8Array,\n            E = new s(X.o * X.F * X.O),\n            Y = X.o * X.O;\n        X.B(E, Y);\n        return E;\n      }\n\n      return J;\n    }();\n  })(UTIF, pako);\n})();","map":{"version":3,"sources":["/Users/abdelilah/Desktop/App/client-app/node_modules/utif/UTIF.js"],"names":["UTIF","module","exports","self","pako","require","log","process","env","NODE_ENV","console","apply","arguments","V","Symbol","iterator","g","constructor","prototype","D","message","Error","name","P","M","B","W","a","d","f","e","b","k","push","children","index","l","r","pop","length","X","n","x","z","c","toString","q","h","C","m","o","J","w","p","A","t","E","Q","u","v","K","F","L","I","R","S","G","O","T","U","Math","min","y","j","N","_util","warn","offset","Y","Int16Array","Uint8Array","parse","subarray","ceil","s","version","Z","Uint16Array","precision","H","width","height","i","Uint8ClampedArray","Uint32Array","getData","JpegDecoder","encodeImage","rgba","metadata","idf","prfx","encode","img","data","buffer","ifds","bin","_binBE","ifdo","writeUint","noffs","_writeIFD","slice","decode","buff","_decodeG3","allow2D","id","readASCII","_binLE","num","readUshort","readUint","noff","_readIFD","decodeImage","isLE","cmpr","fo","bipp","round","bipl","soff","bcnt","bytes","bilen","tw","th","tx","floor","ty","tbuff","_decompress","_copyTile","rps","off","len","tgt","toff","_decodeG4","_decodeLZW","_decodeOldJPEG","_decodeNewJPEG","src","_decodeARW","_decodePackBits","_decodeThunder","_decodeNikon","bps","noc","bpp","bpl","roff","ntoff","nv","_ljpeg_diff","prm","huff","getbithuff","_getbithuff","diff","inp","src_length","raw_width","tiff_bps","arw2","tab","col","row","sum","ljpeg_diff","lim","clr","_putsF","b0","b1","b2","pix","val","max","imax","imin","sh","bit","dp","imgs","nikon_tree","tree","split","make_decoder","_make_decoder","mn","exifIFD","makerNote","md","mdo","ver0","ver1","vpred","readShort","step","csize","shl","min_v","hpred","bti","dt","pos","nbits","zero_after_ff","get_byte","_get_byte","bitbuf","vbits","reset","source","si","tables","tlen","SOI","EOI","boff","byte1","byte2","out","LosslessJpegDecode","olen","rst","parser","decoded","_decodeOldJPEGInit","DQT","DHT","DRI","SOF0","SOS","joff","sosMarker","isTiled","jpgIchgFmt","jifoff","jpgIchgFmtLen","jiflen","soffTag","ycbcrss","ssx","ssy","spp","jpgresint","jpegOffset","ooff","qtables","htables","nc","sofpos","tmptab","set","tmpoff","soslen","sosoff","sofPosition","dlen","buffoff","jpegData","sa","Int8Array","ta","d2","d3","qoff","px","msk","_dmap","_lens","addKeys","lens","arr","i0","inc","termW","termB","makeW","makeB","makeA","lensW","lensB","slen","wrd","line","pline","_makeDiff","a0","a1","a2","mode","toRead","_findDiff","dl","_addNtimes","_writeBits","is1D","endsWith","bits","_lzwTab","tb","tn","chr","copy","_copyData","tln","totl","chrl","ClearCode","EoiCode","Code","OldCode","cd","cl","nit","nil","so","to","tags","ttypes","depth","debug","cnt","ifd","repeat","tag","type","voff","o0","readInt","readFloat","readDouble","oarr","subfd","subIFD","dngPrvt","subsub","keys","Object","writeUshort","eoff","ki","key","parseInt","writeASCII","writeDouble","toRGBA8","area","qarea","intp","io","qi","smpls","ti","map","mi","gotAlpha","replaceIMG","document","getElementsByTagName","sufs","getAttribute","suff","toLowerCase","indexOf","xhr","XMLHttpRequest","_xhrs","_imgs","open","responseType","onload","_imgLoaded","send","target","response","vsns","ma","page","concat","ar","ind","splice","cnv","createElement","ctx","getContext","imgd","createImageData","putImageData","setAttribute","toDataURL","nextZero","ui8","i16","i32","ui32","String","fromCharCode","fl32","fl64","charCodeAt","Int32Array","Float32Array","Float64Array","xoff","yoff","xlim","ylim","tof","sof","_","$"],"mappings":"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","sourcesContent":["\n\n\n\n;(function(){\nvar UTIF = {};\n\n// Make available for import by `require()`\nif (typeof module == \"object\") {module.exports = UTIF;}\nelse {self.UTIF = UTIF;}\n\nvar pako;\nif (typeof require == \"function\") {pako = require(\"pako\");}\nelse {pako = self.pako;}\n\nfunction log() { if (typeof process==\"undefined\" || process.env.NODE_ENV==\"development\") console.log.apply(console, arguments);  }\n\n(function(UTIF, pako){\n\t\n// Following lines add a JPEG decoder  to UTIF.JpegDecoder\n(function(){var V=\"function\"===typeof Symbol&&\"symbol\"===typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&\"function\"===typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?\"symbol\":typeof g},D=function(){function g(g){this.message=\"JPEG error: \"+g}g.prototype=Error();g.prototype.name=\"JpegError\";return g.constructor=g}(),P=function(){function g(g,D){this.message=g;this.g=D}g.prototype=Error();g.prototype.name=\"DNLMarkerError\";return g.constructor=g}();(function(){function g(){this.M=\nnull;this.B=-1}function W(a,d){for(var f=0,e=[],b,B,k=16;0<k&&!a[k-1];)k--;e.push({children:[],index:0});var l=e[0],r;for(b=0;b<k;b++){for(B=0;B<a[b];B++){l=e.pop();for(l.children[l.index]=d[f];0<l.index;)l=e.pop();l.index++;for(e.push(l);e.length<=b;)e.push(r={children:[],index:0}),l.children[l.index]=r.children,l=r;f++}b+1<k&&(e.push(r={children:[],index:0}),l.children[l.index]=r.children,l=r)}return e[0].children}function X(a,d,f,e,b,B,k,l,r){function n(){if(0<x)return x--,z>>x&1;z=a[d++];if(255===\nz){var c=a[d++];if(c){if(220===c&&g){d+=2;var b=a[d++]<<8|a[d++];if(0<b&&b!==f.g)throw new P(\"Found DNL marker (0xFFDC) while parsing scan data\",b);}throw new D(\"unexpected marker \"+(z<<8|c).toString(16));}}x=7;return z>>>7}function q(a){for(;;){a=a[n()];if(\"number\"===typeof a)return a;if(\"object\"!==(\"undefined\"===typeof a?\"undefined\":V(a)))throw new D(\"invalid huffman sequence\");}}function h(a){for(var c=0;0<a;)c=c<<1|n(),a--;return c}function c(a){if(1===a)return 1===n()?1:-1;var c=h(a);return c>=\n1<<a-1?c:c+(-1<<a)+1}function C(a,b){var d=q(a.D);d=0===d?0:c(d);a.a[b]=a.m+=d;for(d=1;64>d;){var h=q(a.o),k=h&15;h>>=4;if(0===k){if(15>h)break;d+=16}else d+=h,a.a[b+J[d]]=c(k),d++}}function w(a,d){var b=q(a.D);b=0===b?0:c(b)<<r;a.a[d]=a.m+=b}function p(a,c){a.a[c]|=n()<<r}function m(a,b){if(0<A)A--;else for(var d=B;d<=k;){var e=q(a.o),f=e&15;e>>=4;if(0===f){if(15>e){A=h(e)+(1<<e)-1;break}d+=16}else d+=e,a.a[b+J[d]]=c(f)*(1<<r),d++}}function t(a,d){for(var b=B,e=0,f;b<=k;){f=d+J[b];var l=0>a.a[f]?\n-1:1;switch(E){case 0:e=q(a.o);f=e&15;e>>=4;if(0===f)15>e?(A=h(e)+(1<<e),E=4):(e=16,E=1);else{if(1!==f)throw new D(\"invalid ACn encoding\");Q=c(f);E=e?2:3}continue;case 1:case 2:a.a[f]?a.a[f]+=l*(n()<<r):(e--,0===e&&(E=2===E?3:0));break;case 3:a.a[f]?a.a[f]+=l*(n()<<r):(a.a[f]=Q<<r,E=0);break;case 4:a.a[f]&&(a.a[f]+=l*(n()<<r))}b++}4===E&&(A--,0===A&&(E=0))}var g=9<arguments.length&&void 0!==arguments[9]?arguments[9]:!1,u=f.P,v=d,z=0,x=0,A=0,E=0,Q,K=e.length,F,L,M,I;var R=f.S?0===B?0===l?w:p:0===l?\nm:t:C;var G=0;var O=1===K?e[0].c*e[0].l:u*f.O;for(var S,T;G<O;){var U=b?Math.min(O-G,b):O;for(F=0;F<K;F++)e[F].m=0;A=0;if(1===K){var y=e[0];for(I=0;I<U;I++)R(y,64*((y.c+1)*(G/y.c|0)+G%y.c)),G++}else for(I=0;I<U;I++){for(F=0;F<K;F++)for(y=e[F],S=y.h,T=y.j,L=0;L<T;L++)for(M=0;M<S;M++)R(y,64*((y.c+1)*((G/u|0)*y.j+L)+(G%u*y.h+M)));G++}x=0;(y=N(a,d))&&y.f&&((0,_util.warn)(\"decodeScan - unexpected MCU data, current marker is: \"+y.f),d=y.offset);y=y&&y.F;if(!y||65280>=y)throw new D(\"marker was not found\");\nif(65488<=y&&65495>=y)d+=2;else break}(y=N(a,d))&&y.f&&((0,_util.warn)(\"decodeScan - unexpected Scan data, current marker is: \"+y.f),d=y.offset);return d-v}function Y(a,d){for(var f=d.c,e=d.l,b=new Int16Array(64),B=0;B<e;B++)for(var k=0;k<f;k++){var l=64*((d.c+1)*B+k),r=b,n=d.G,q=d.a;if(!n)throw new D(\"missing required Quantization Table.\");for(var h=0;64>h;h+=8){var c=q[l+h];var C=q[l+h+1];var w=q[l+h+2];var p=q[l+h+3];var m=q[l+h+4];var t=q[l+h+5];var g=q[l+h+6];var u=q[l+h+7];c*=n[h];if(0===(C|\nw|p|m|t|g|u))c=5793*c+512>>10,r[h]=c,r[h+1]=c,r[h+2]=c,r[h+3]=c,r[h+4]=c,r[h+5]=c,r[h+6]=c,r[h+7]=c;else{C*=n[h+1];w*=n[h+2];p*=n[h+3];m*=n[h+4];t*=n[h+5];g*=n[h+6];u*=n[h+7];var v=5793*c+128>>8;var z=5793*m+128>>8;var x=w;var A=g;m=2896*(C-u)+128>>8;u=2896*(C+u)+128>>8;p<<=4;t<<=4;v=v+z+1>>1;z=v-z;c=3784*x+1567*A+128>>8;x=1567*x-3784*A+128>>8;A=c;m=m+t+1>>1;t=m-t;u=u+p+1>>1;p=u-p;v=v+A+1>>1;A=v-A;z=z+x+1>>1;x=z-x;c=2276*m+3406*u+2048>>12;m=3406*m-2276*u+2048>>12;u=c;c=799*p+4017*t+2048>>12;p=4017*\np-799*t+2048>>12;t=c;r[h]=v+u;r[h+7]=v-u;r[h+1]=z+t;r[h+6]=z-t;r[h+2]=x+p;r[h+5]=x-p;r[h+3]=A+m;r[h+4]=A-m}}for(n=0;8>n;++n)c=r[n],C=r[n+8],w=r[n+16],p=r[n+24],m=r[n+32],t=r[n+40],g=r[n+48],u=r[n+56],0===(C|w|p|m|t|g|u)?(c=5793*c+8192>>14,c=-2040>c?0:2024<=c?255:c+2056>>4,q[l+n]=c,q[l+n+8]=c,q[l+n+16]=c,q[l+n+24]=c,q[l+n+32]=c,q[l+n+40]=c,q[l+n+48]=c,q[l+n+56]=c):(v=5793*c+2048>>12,z=5793*m+2048>>12,x=w,A=g,m=2896*(C-u)+2048>>12,u=2896*(C+u)+2048>>12,v=(v+z+1>>1)+4112,z=v-z,c=3784*x+1567*A+2048>>\n12,x=1567*x-3784*A+2048>>12,A=c,m=m+t+1>>1,t=m-t,u=u+p+1>>1,p=u-p,v=v+A+1>>1,A=v-A,z=z+x+1>>1,x=z-x,c=2276*m+3406*u+2048>>12,m=3406*m-2276*u+2048>>12,u=c,c=799*p+4017*t+2048>>12,p=4017*p-799*t+2048>>12,t=c,c=v+u,u=v-u,C=z+t,g=z-t,w=x+p,t=x-p,p=A+m,m=A-m,c=16>c?0:4080<=c?255:c>>4,C=16>C?0:4080<=C?255:C>>4,w=16>w?0:4080<=w?255:w>>4,p=16>p?0:4080<=p?255:p>>4,m=16>m?0:4080<=m?255:m>>4,t=16>t?0:4080<=t?255:t>>4,g=16>g?0:4080<=g?255:g>>4,u=16>u?0:4080<=u?255:u>>4,q[l+n]=c,q[l+n+8]=C,q[l+n+16]=w,q[l+n+24]=\np,q[l+n+32]=m,q[l+n+40]=t,q[l+n+48]=g,q[l+n+56]=u)}return d.a}function N(a,d){var f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:d,e=a.length-1;f=f<d?f:d;if(d>=e)return null;var b=a[d]<<8|a[d+1];if(65472<=b&&65534>=b)return{f:null,F:b,offset:d};for(var B=a[f]<<8|a[f+1];!(65472<=B&&65534>=B);){if(++f>=e)return null;B=a[f]<<8|a[f+1]}return{f:b.toString(16),F:B,offset:f}}var J=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,\n57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);g.prototype={parse:function(a){function d(){var d=a[k]<<8|a[k+1];k+=2;return d}function f(){var b=d();b=k+b-2;var c=N(a,b,k);c&&c.f&&((0,_util.warn)(\"readDataBlock - incorrect length, current marker is: \"+c.f),b=c.offset);b=a.subarray(k,b);k+=b.length;return b}function e(a){for(var b=Math.ceil(a.v/8/a.s),c=Math.ceil(a.g/8/a.u),d=0;d<a.b.length;d++){v=a.b[d];var e=Math.ceil(Math.ceil(a.v/8)*v.h/a.s),f=Math.ceil(Math.ceil(a.g/\n8)*v.j/a.u);v.a=new Int16Array(64*c*v.j*(b*v.h+1));v.c=e;v.l=f}a.P=b;a.O=c}var b=(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).N,B=void 0===b?null:b,k=0,l=null,r=0;b=[];var n=[],q=[],h=d();if(65496!==h)throw new D(\"SOI not found\");for(h=d();65497!==h;){switch(h){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var c=f();65518===h&&65===c[0]&&100===\nc[1]&&111===c[2]&&98===c[3]&&101===c[4]&&(l={version:c[5]<<8|c[6],Y:c[7]<<8|c[8],Z:c[9]<<8|c[10],W:c[11]});break;case 65499:h=d()+k-2;for(var g;k<h;){var w=a[k++],p=new Uint16Array(64);if(0===w>>4)for(c=0;64>c;c++)g=J[c],p[g]=a[k++];else if(1===w>>4)for(c=0;64>c;c++)g=J[c],p[g]=d();else throw new D(\"DQT - invalid table spec\");b[w&15]=p}break;case 65472:case 65473:case 65474:if(m)throw new D(\"Only single frame JPEGs supported\");d();var m={};m.X=65473===h;m.S=65474===h;m.precision=a[k++];h=d();m.g=\nB||h;m.v=d();m.b=[];m.C={};c=a[k++];for(h=p=w=0;h<c;h++){g=a[k];var t=a[k+1]>>4;var H=a[k+1]&15;w<t&&(w=t);p<H&&(p=H);t=m.b.push({h:t,j:H,T:a[k+2],G:null});m.C[g]=t-1;k+=3}m.s=w;m.u=p;e(m);break;case 65476:g=d();for(h=2;h<g;){w=a[k++];p=new Uint8Array(16);for(c=t=0;16>c;c++,k++)t+=p[c]=a[k];H=new Uint8Array(t);for(c=0;c<t;c++,k++)H[c]=a[k];h+=17+t;(0===w>>4?q:n)[w&15]=W(p,H)}break;case 65501:d();var u=d();break;case 65498:c=1===++r&&!B;d();w=a[k++];g=[];for(h=0;h<w;h++){p=m.C[a[k++]];var v=m.b[p];\np=a[k++];v.D=q[p>>4];v.o=n[p&15];g.push(v)}h=a[k++];w=a[k++];p=a[k++];try{var z=X(a,k,m,g,u,h,w,p>>4,p&15,c);k+=z}catch(x){if(x instanceof P)return(0,_util.warn)('Attempting to re-parse JPEG image using \"scanLines\" parameter found in DNL marker (0xFFDC) segment.'),this.parse(a,{N:x.g});throw x;}break;case 65500:k+=4;break;case 65535:255!==a[k]&&k--;break;default:if(255===a[k-3]&&192<=a[k-2]&&254>=a[k-2])k-=3;else if((c=N(a,k-2))&&c.f)(0,_util.warn)(\"JpegImage.parse - unexpected data, current marker is: \"+\nc.f),k=c.offset;else throw new D(\"unknown marker \"+h.toString(16));}h=d()}this.width=m.v;this.height=m.g;this.A=l;this.b=[];for(h=0;h<m.b.length;h++){v=m.b[h];if(u=b[v.T])v.G=u;this.b.push({R:Y(m,v),U:v.h/m.s,V:v.j/m.u,c:v.c,l:v.l})}this.i=this.b.length},L:function(a,d){var f=this.width/a,e=this.height/d,b,g,k=this.b.length,l=a*d*k,r=new Uint8ClampedArray(l),n=new Uint32Array(a);for(g=0;g<k;g++){var q=this.b[g];var h=q.U*f;var c=q.V*e;var C=g;var w=q.R;var p=q.c+1<<3;for(b=0;b<a;b++)q=0|b*h,n[b]=\n(q&4294967288)<<3|q&7;for(h=0;h<d;h++)for(q=0|h*c,q=p*(q&4294967288)|(q&7)<<3,b=0;b<a;b++)r[C]=w[q+n[b]],C+=k}if(e=this.M)for(g=0;g<l;)for(f=q=0;q<k;q++,g++,f+=2)r[g]=(r[g]*e[f]>>8)+e[f+1];return r},w:function(){return this.A?!!this.A.W:3===this.i?0===this.B?!1:!0:1===this.B?!0:!1},I:function(a){for(var d,f,e,b=0,g=a.length;b<g;b+=3)d=a[b],f=a[b+1],e=a[b+2],a[b]=d-179.456+1.402*e,a[b+1]=d+135.459-.344*f-.714*e,a[b+2]=d-226.816+1.772*f;return a},K:function(a){for(var d,f,e,b,g=0,k=0,l=a.length;k<l;k+=\n4)d=a[k],f=a[k+1],e=a[k+2],b=a[k+3],a[g++]=-122.67195406894+f*(-6.60635669420364E-5*f+4.37130475926232E-4*e-5.4080610064599E-5*d+4.8449797120281E-4*b-.154362151871126)+e*(-9.57964378445773E-4*e+8.17076911346625E-4*d-.00477271405408747*b+1.53380253221734)+d*(9.61250184130688E-4*d-.00266257332283933*b+.48357088451265)+b*(-3.36197177618394E-4*b+.484791561490776),a[g++]=107.268039397724+f*(2.19927104525741E-5*f-6.40992018297945E-4*e+6.59397001245577E-4*d+4.26105652938837E-4*b-.176491792462875)+e*(-7.78269941513683E-4*\ne+.00130872261408275*d+7.70482631801132E-4*b-.151051492775562)+d*(.00126935368114843*d-.00265090189010898*b+.25802910206845)+b*(-3.18913117588328E-4*b-.213742400323665),a[g++]=-20.810012546947+f*(-5.70115196973677E-4*f-2.63409051004589E-5*e+.0020741088115012*d-.00288260236853442*b+.814272968359295)+e*(-1.53496057440975E-5*e-1.32689043961446E-4*d+5.60833691242812E-4*b-.195152027534049)+d*(.00174418132927582*d-.00255243321439347*b+.116935020465145)+b*(-3.43531996510555E-4*b+.24165260232407);return a.subarray(0,\ng)},J:function(a){for(var d,f,e,b=0,g=a.length;b<g;b+=4)d=a[b],f=a[b+1],e=a[b+2],a[b]=434.456-d-1.402*e,a[b+1]=119.541-d+.344*f+.714*e,a[b+2]=481.816-d-1.772*f;return a},H:function(a){for(var d,f,e,b,g=0,k=1/255,l=0,r=a.length;l<r;l+=4)d=a[l]*k,f=a[l+1]*k,e=a[l+2]*k,b=a[l+3]*k,a[g++]=255+d*(-4.387332384609988*d+54.48615194189176*f+18.82290502165302*e+212.25662451639585*b-285.2331026137004)+f*(1.7149763477362134*f-5.6096736904047315*e-17.873870861415444*b-5.497006427196366)+e*(-2.5217340131683033*\ne-21.248923337353073*b+17.5119270841813)-b*(21.86122147463605*b+189.48180835922747),a[g++]=255+d*(8.841041422036149*d+60.118027045597366*f+6.871425592049007*e+31.159100130055922*b-79.2970844816548)+f*(-15.310361306967817*f+17.575251261109482*e+131.35250912493976*b-190.9453302588951)+e*(4.444339102852739*e+9.8632861493405*b-24.86741582555878)-b*(20.737325471181034*b+187.80453709719578),a[g++]=255+d*(.8842522430003296*d+8.078677503112928*f+30.89978309703729*e-.23883238689178934*b-14.183576799673286)+\nf*(10.49593273432072*f+63.02378494754052*e+50.606957656360734*b-112.23884253719248)+e*(.03296041114873217*e+115.60384449646641*b-193.58209356861505)-b*(22.33816807309886*b+180.12613974708367);return a.subarray(0,g)},getData:function(a,d,f){if(4<this.i)throw new D(\"Unsupported color mode\");a=this.L(a,d);if(1===this.i&&f){f=a.length;d=new Uint8ClampedArray(3*f);for(var e=0,b=0;b<f;b++){var g=a[b];d[e++]=g;d[e++]=g;d[e++]=g}return d}if(3===this.i&&this.w())return this.I(a);if(4===this.i){if(this.w())return f?\nthis.K(a):this.J(a);if(f)return this.H(a)}return a}}; UTIF.JpegDecoder=g})()})();\n\n//UTIF.JpegDecoder = PDFJS.JpegImage;\n\n\nUTIF.encodeImage = function(rgba, w, h, metadata)\n{\n\tvar idf = { \"t256\":[w], \"t257\":[h], \"t258\":[8,8,8,8], \"t259\":[1], \"t262\":[2], \"t273\":[1000], // strips offset\n\t\t\t\t\"t277\":[4], \"t278\":[h], /* rows per strip */          \"t279\":[w*h*4], // strip byte counts\n\t\t\t\t\"t282\":[1], \"t283\":[1], \"t284\":[1], \"t286\":[0], \"t287\":[0], \"t296\":[1], \"t305\": [\"Photopea (UTIF.js)\"], \"t338\":[1]\n\t\t};\n\tif (metadata) for (var i in metadata) idf[i] = metadata[i];\n\t\n\tvar prfx = new Uint8Array(UTIF.encode([idf]));\n\tvar img = new Uint8Array(rgba);\n\tvar data = new Uint8Array(1000+w*h*4);\n\tfor(var i=0; i<prfx.length; i++) data[i] = prfx[i];\n\tfor(var i=0; i<img .length; i++) data[1000+i] = img[i];\n\treturn data.buffer;\n}\n\nUTIF.encode = function(ifds)\n{\n\tvar data = new Uint8Array(20000), offset = 4, bin = UTIF._binBE;\n\tdata[0]=77;  data[1]=77;  data[3]=42;\n\n\tvar ifdo = 8;\n\tbin.writeUint(data, offset, ifdo);  offset+=4;\n\tfor(var i=0; i<ifds.length; i++)\n\t{\n\t\tvar noffs = UTIF._writeIFD(bin, data, ifdo, ifds[i]);\n\t\tifdo = noffs[1];\n\t\tif(i<ifds.length-1) bin.writeUint(data, noffs[0], ifdo);\n\t}\n\treturn data.slice(0, ifdo).buffer;\n}\n//UTIF.encode._writeIFD\n\nUTIF.decode = function(buff)\n{\n\tUTIF.decode._decodeG3.allow2D = null;\n\tvar data = new Uint8Array(buff), offset = 0;\n\n\tvar id = UTIF._binBE.readASCII(data, offset, 2);  offset+=2;\n\tvar bin = id==\"II\" ? UTIF._binLE : UTIF._binBE;\n\tvar num = bin.readUshort(data, offset);  offset+=2;\n\n\tvar ifdo = bin.readUint(data, offset);  offset+=4;\n\tvar ifds = [];\n\twhile(true) {\n\t\tvar noff = UTIF._readIFD(bin, data, ifdo, ifds, 0, false);\n\t\tifdo = bin.readUint(data, noff);\n\t\tif(ifdo==0) break;\n\t}\n\treturn ifds;\n}\n\nUTIF.decodeImage = function(buff, img, ifds)\n{\n\tvar data = new Uint8Array(buff);\n\tvar id = UTIF._binBE.readASCII(data, 0, 2);\n\n\tif(img[\"t256\"]==null) return;\t// No width => probably not an image\n\timg.isLE = id==\"II\";\n\timg.width  = img[\"t256\"][0];  //delete img[\"t256\"];\n\timg.height = img[\"t257\"][0];  //delete img[\"t257\"];\n\n\tvar cmpr   = img[\"t259\"] ? img[\"t259\"][0] : 1;  //delete img[\"t259\"];\n\tvar fo = img[\"t266\"] ? img[\"t266\"][0] : 1;  //delete img[\"t266\"];\n\tif(img[\"t284\"] && img[\"t284\"][0]==2) log(\"PlanarConfiguration 2 should not be used!\");\n\n\tvar bipp;  // bits per pixel\n\tif(img[\"t258\"]) bipp = Math.min(32,img[\"t258\"][0])*img[\"t258\"].length;\n\telse            bipp = (img[\"t277\"]?img[\"t277\"][0]:1);  \n\t// Some .NEF files have t258==14, even though they use 16 bits per pixel\n\tif(cmpr==1 && img[\"t279\"]!=null && img[\"t278\"] && img[\"t262\"][0]==32803)  {\n\t\tbipp = Math.round((img[\"t279\"][0]*8)/(img.width*img[\"t278\"][0]));\n\t}\n\tvar bipl = Math.ceil(img.width*bipp/8)*8;\n\tvar soff = img[\"t273\"];  if(soff==null) soff = img[\"t324\"];\n\tvar bcnt = img[\"t279\"];  if(cmpr==1 && soff.length==1) bcnt = [img.height*(bipl>>>3)];  if(bcnt==null) bcnt = img[\"t325\"];\n\tvar bytes = new Uint8Array(img.height*(bipl>>>3)), bilen = 0;\n\n\tif(img[\"t322\"]!=null) // tiled\n\t{\n\t\tvar tw = img[\"t322\"][0], th = img[\"t323\"][0];\n\t\tvar tx = Math.floor((img.width  + tw - 1) / tw);\n\t\tvar ty = Math.floor((img.height + th - 1) / th);\n\t\tvar tbuff = new Uint8Array(Math.ceil(tw*th*bipp/8)|0);\n\t\tfor(var y=0; y<ty; y++)\n\t\t\tfor(var x=0; x<tx; x++)\n\t\t\t{\n\t\t\t\tvar i = y*tx+x;  for(var j=0; j<tbuff.length; j++) tbuff[j]=0;\n\t\t\t\tUTIF.decode._decompress(img,ifds, data, soff[i], bcnt[i], cmpr, tbuff, 0, fo);\n\t\t\t\t// Might be required for 7 too. Need to check\n\t\t\t\tif (cmpr==6) bytes = tbuff;\n\t\t\t\telse UTIF._copyTile(tbuff, Math.ceil(tw*bipp/8)|0, th, bytes, Math.ceil(img.width*bipp/8)|0, img.height, Math.ceil(x*tw*bipp/8)|0, y*th);\n\t\t\t}\n\t\tbilen = bytes.length*8;\n\t}\n\telse\t// stripped\n\t{\n\t\tvar rps = img[\"t278\"] ? img[\"t278\"][0] : img.height;   rps = Math.min(rps, img.height);\n\t\tfor(var i=0; i<soff.length; i++)\n\t\t{\n\t\t\tUTIF.decode._decompress(img,ifds, data, soff[i], bcnt[i], cmpr, bytes, Math.ceil(bilen/8)|0, fo);\n\t\t\tbilen += bipl * rps;\n\t\t}\n\t\tbilen = Math.min(bilen, bytes.length*8);\n\t}\n\timg.data = new Uint8Array(bytes.buffer, 0, Math.ceil(bilen/8)|0);\n}\n\nUTIF.decode._decompress = function(img,ifds, data, off, len, cmpr, tgt, toff, fo)  // fill order\n{\n\t//console.log(\"compression\", cmpr);\n\t//var time = Date.now();\n\tif(false) {}\n\telse if(cmpr==1 || (len==tgt.length && cmpr!=32767)) for(var j=0; j<len; j++) tgt[toff+j] = data[off+j];\n\telse if(cmpr==3) UTIF.decode._decodeG3 (data, off, len, tgt, toff, img.width, fo);\n\telse if(cmpr==4) UTIF.decode._decodeG4 (data, off, len, tgt, toff, img.width, fo);\n\telse if(cmpr==5) UTIF.decode._decodeLZW(data, off, tgt, toff);\n\telse if(cmpr==6) UTIF.decode._decodeOldJPEG(img, data, off, len, tgt, toff);\n\telse if(cmpr==7) UTIF.decode._decodeNewJPEG(img, data, off, len, tgt, toff);\n\telse if(cmpr==8) {  var src = new Uint8Array(data.buffer,off,len);  var bin = pako[\"inflate\"](src);  for(var i=0; i<bin.length; i++) tgt[toff+i]=bin[i];  }\n\telse if(cmpr==32767) UTIF.decode._decodeARW(img, data, off, len, tgt, toff);\n\telse if(cmpr==32773) UTIF.decode._decodePackBits(data, off, len, tgt, toff);\n\telse if(cmpr==32809) UTIF.decode._decodeThunder (data, off, len, tgt, toff);\n\telse if(cmpr==34713) //for(var j=0; j<len; j++) tgt[toff+j] = data[off+j];\n\t\tUTIF.decode._decodeNikon   (img,ifds, data, off, len, tgt, toff);\n\telse log(\"Unknown compression\", cmpr);\n\t\n\t//console.log(Date.now()-time);\n\t\n\tvar bps = (img[\"t258\"]?Math.min(32,img[\"t258\"][0]):1);\n\tvar noc = (img[\"t277\"]?img[\"t277\"][0]:1), bpp=(bps*noc)>>>3, h = (img[\"t278\"] ? img[\"t278\"][0] : img.height), bpl = Math.ceil(bps*noc*img.width/8);\n\t\n\t// convert to Little Endian  /*\n\tif(bps==16 && !img.isLE && img[\"t33422\"]==null)  // not DNG\n\t\tfor(var y=0; y<h; y++) {\n\t\t\t//console.log(\"fixing endianity\");\n\t\t\tvar roff = toff+y*bpl;\n\t\t\tfor(var x=1; x<bpl; x+=2) {  var t=tgt[roff+x];  tgt[roff+x]=tgt[roff+x-1];  tgt[roff+x-1]=t;  }\n\t\t}  //*/\n\n\tif(img[\"t317\"] && img[\"t317\"][0]==2)\n\t{\n\t\tfor(var y=0; y<h; y++)\n\t\t{\n\t\t\tvar ntoff = toff+y*bpl;\n\t\t\tif(bps==16) for(var j=bpp; j<bpl; j+=2) {\n\t\t\t\tvar nv = ((tgt[ntoff+j+1]<<8)|tgt[ntoff+j])  +  ((tgt[ntoff+j-bpp+1]<<8)|tgt[ntoff+j-bpp]);\n\t\t\t\ttgt[ntoff+j] = nv&255;  tgt[ntoff+j+1] = (nv>>>8)&255;  \n\t\t\t}\n\t\t\telse if(noc==3) for(var j=  3; j<bpl; j+=3)\n\t\t\t{\n\t\t\t\ttgt[ntoff+j  ] = (tgt[ntoff+j  ] + tgt[ntoff+j-3])&255;\n\t\t\t\ttgt[ntoff+j+1] = (tgt[ntoff+j+1] + tgt[ntoff+j-2])&255;\n\t\t\t\ttgt[ntoff+j+2] = (tgt[ntoff+j+2] + tgt[ntoff+j-1])&255;\n\t\t\t}\n\t\t\telse for(var j=bpp; j<bpl; j++) tgt[ntoff+j] = (tgt[ntoff+j] + tgt[ntoff+j-bpp])&255;\n\t\t}\n\t}\n}\n\nUTIF.decode._ljpeg_diff = function(data, prm, huff) {\n\tvar getbithuff   = UTIF.decode._getbithuff;\n\tvar len, diff;\n\tlen  = getbithuff(data, prm, huff[0], huff);\n\tdiff = getbithuff(data, prm, len, 0);\n\tif ((diff & (1 << (len-1))) == 0)  diff -= (1 << len) - 1;\n\treturn diff;\n}\nUTIF.decode._decodeARW = function(img, inp, off, src_length, tgt, toff) {\n\tvar raw_width = img[\"t256\"][0], height=img[\"t257\"][0], tiff_bps=img[\"t258\"][0];\n\tvar bin=(img.isLE ? UTIF._binLE : UTIF._binBE);\n\t//console.log(raw_width, height, tiff_bps, raw_width*height, src_length);\n\tvar arw2 = (raw_width*height == src_length) || (raw_width*height*1.5 == src_length);\n\t//arw2 = true;\n\t//console.log(\"ARW2: \", arw2, raw_width*height, src_length, tgt.length);\n\tif(!arw2) {  //\"sony_arw_load_raw\"; // not arw2\n\t\theight+=8;\n\t\tvar prm = [off,0,0,0];\n\t\tvar huff = new Uint16Array(32770);\n\t\tvar tab = [ 0xf11,0xf10,0xe0f,0xd0e,0xc0d,0xb0c,0xa0b,0x90a,0x809,\n\t\t\t0x708,0x607,0x506,0x405,0x304,0x303,0x300,0x202,0x201 ];\n\t\tvar i, c, n, col, row, sum=0;\n\t\tvar ljpeg_diff = UTIF.decode._ljpeg_diff;\n\n\t\thuff[0] = 15;\n\t\tfor (n=i=0; i < 18; i++) {\n\t\t\tvar lim = 32768 >>> (tab[i] >>> 8);\n\t\t\tfor(var c=0; c<lim; c++) huff[++n] = tab[i];\n\t\t}\n\t\tfor (col = raw_width; col--; )\n\t\t\tfor (row=0; row < height+1; row+=2) {\n\t\t\t\tif (row == height) row = 1;\n\t\t\t\tsum += ljpeg_diff(inp, prm, huff);\n\t\t\t\tif (row < height) {\n\t\t\t\t\tvar clr =  (sum)&4095;\n\t\t\t\t\tUTIF.decode._putsF(tgt, (row*raw_width+col)*tiff_bps, clr<<(16-tiff_bps));\n\t\t\t\t}\n\t\t\t}\n\t\treturn;\n\t}\n\tif(raw_width*height*1.5==src_length) {\n\t\t//console.log(\"weird compression\");\n\t\tfor(var i=0; i<src_length; i+=3) {  var b0=inp[off+i+0], b1=inp[off+i+1], b2=inp[off+i+2];  \n\t\t\ttgt[toff+i]=(b1<<4)|(b0>>>4);  tgt[toff+i+1]=(b0<<4)|(b2>>>4);  tgt[toff+i+2]=(b2<<4)|(b1>>>4);  }\n\t\treturn;\n\t}\n\t\n\tvar pix = new Uint16Array(16);\n\tvar row, col, val, max, min, imax, imin, sh, bit, i,    dp;\n\t\n\tvar data = new Uint8Array(raw_width+1);\n\tfor (row=0; row < height; row++) {\n\t\t//fread (data, 1, raw_width, ifp);\n\t\tfor(var j=0; j<raw_width; j++) data[j]=inp[off++];\n\t\tfor (dp=0, col=0; col < raw_width-30; dp+=16) {\n\t\t\tmax  = 0x7ff & (val = bin.readUint(data,dp));\n\t\t\tmin  = 0x7ff & (val >>> 11);\n\t\t\timax = 0x0f & (val >>> 22);\n\t\t\timin = 0x0f & (val >>> 26);\n\t\t\tfor (sh=0; sh < 4 && 0x80 << sh <= max-min; sh++);\n\t\t\tfor (bit=30, i=0; i < 16; i++)\n\t\t\t\tif      (i == imax) pix[i] = max;\n\t\t\t\telse if (i == imin) pix[i] = min;\n\t\t\t\telse {\n\t\t\t\t\tpix[i] = ((bin.readUshort(data, dp+(bit >> 3)) >>> (bit & 7) & 0x7f) << sh) + min;\n\t\t\t\t\tif (pix[i] > 0x7ff) pix[i] = 0x7ff;\n\t\t\t\t\tbit += 7;\n\t\t\t\t}\n\t\t\tfor (i=0; i < 16; i++, col+=2) {\n\t\t\t\t//RAW(row,col) = curve[pix[i] << 1] >> 2;\n\t\t\t\tvar clr =  pix[i]<<1;   //clr = 0xffff;\n\t\t\t\tUTIF.decode._putsF(tgt, (row*raw_width+col)*tiff_bps, clr<<(16-tiff_bps));\n\t\t\t}\n\t\t\tcol -= col & 1 ? 1:31;\n\t\t}\n\t}\n}\n\nUTIF.decode._decodeNikon = function(img,imgs, data, off, src_length, tgt, toff)\n{\n\tvar nikon_tree = [\n    [ 0, 0,1,5,1,1,1,1,1,1,2,0,0,0,0,0,0,\t/* 12-bit lossy */\n      5,4,3,6,2,7,1,0,8,9,11,10,12 ],\n    [ 0, 0,1,5,1,1,1,1,1,1,2,0,0,0,0,0,0,\t/* 12-bit lossy after split */\n      0x39,0x5a,0x38,0x27,0x16,5,4,3,2,1,0,11,12,12 ],\n    [ 0, 0,1,4,2,3,1,2,0,0,0,0,0,0,0,0,0,  /* 12-bit lossless */\n      5,4,6,3,7,2,8,1,9,0,10,11,12 ],\n    [ 0, 0,1,4,3,1,1,1,1,1,2,0,0,0,0,0,0,\t/* 14-bit lossy */\n      5,6,4,7,8,3,9,2,1,0,10,11,12,13,14 ],\n    [ 0, 0,1,5,1,1,1,1,1,1,1,2,0,0,0,0,0,\t/* 14-bit lossy after split */\n      8,0x5c,0x4b,0x3a,0x29,7,6,5,4,3,2,1,0,13,14 ],\n    [ 0, 0,1,4,2,2,3,1,2,0,0,0,0,0,0,0,0,\t/* 14-bit lossless */\n      7,6,8,5,9,4,10,3,11,12,2,0,1,13,14 ] ];\n\t  \n\tvar raw_width = img[\"t256\"][0], height=img[\"t257\"][0], tiff_bps=img[\"t258\"][0];\n\t\n\tvar tree = 0, split = 0;\n\tvar make_decoder = UTIF.decode._make_decoder;\n\tvar getbithuff   = UTIF.decode._getbithuff;\n\t\n\tvar mn = imgs[0].exifIFD.makerNote, md = mn[\"t150\"]?mn[\"t150\"]:mn[\"t140\"], mdo=0;  //console.log(mn,md);\n\t//console.log(md[0].toString(16), md[1].toString(16), tiff_bps);\n\tvar ver0 = md[mdo++], ver1 = md[mdo++];\n\tif (ver0 == 0x49 || ver1 == 0x58)  mdo+=2110;\n\tif (ver0 == 0x46) tree = 2;\n\tif (tiff_bps == 14) tree += 3;\n\t\n\tvar vpred = [[0,0],[0,0]], bin=(img.isLE ? UTIF._binLE : UTIF._binBE);\n\tfor(var i=0; i<2; i++) for(var j=0; j<2; j++) {  vpred[i][j] = bin.readShort(md,mdo);  mdo+=2;   }  // not sure here ... [i][j] or [j][i]\n\t//console.log(vpred);\n\t\n\t\n\tvar max = 1 << tiff_bps & 0x7fff, step=0;\n\tvar csize = bin.readShort(md,mdo);  mdo+=2;\n\tif (csize > 1) step = Math.floor(max / (csize-1));\n\tif (ver0 == 0x44 && ver1 == 0x20 && step > 0)  split = bin.readShort(md,562);\n\t\n\t\n\tvar i;\n\tvar row, col;\n\tvar len, shl, diff;\n\tvar min_v = 0;\n\tvar hpred = [0,0];\n\tvar huff = make_decoder(nikon_tree[tree]);\n\t\n\t//var g_input_offset=0, bitbuf=0, vbits=0, reset=0;\n\tvar prm = [off,0,0,0];\n\t//console.log(split);  split = 170;\n\t\n\tfor (min_v=row=0; row < height; row++) {\n\t\tif (split && row == split) {\n\t\t\t//free (huff);\n\t\t\thuff = make_decoder (nikon_tree[tree+1]);\n\t\t\t//max_v += (min_v = 16) << 1;\n\t\t}\n\t\tfor (col=0; col < raw_width; col++) {\n\t\t\ti = getbithuff(data,prm,huff[0],huff);\n\t\t\tlen = i  & 15;\n\t\t\tshl = i >>> 4;\n\t\t\tdiff = (((getbithuff(data,prm,len-shl,0) << 1) + 1) << shl) >>> 1;\n\t\t\tif ((diff & (1 << (len-1))) == 0)\n\t\t\t\tdiff -= (1 << len) - (shl==0?1:0);\n\t\t\tif (col < 2) hpred[col] = vpred[row & 1][col] += diff;\n\t\t\telse         hpred[col & 1] += diff;\n\t\t\t\n\t\t\tvar clr = Math.min(Math.max(hpred[col & 1],0),(1<<tiff_bps)-1);\n\t\t\tvar bti = (row*raw_width+col)*tiff_bps;  \n\t\t\tUTIF.decode._putsF(tgt, bti, clr<<(16-tiff_bps));\n\t\t}\n\t}\n}\n// put 16 bits\nUTIF.decode._putsF= function(dt, pos, val) {  val = val<<(8-(pos&7));  var o=(pos>>>3);  dt[o]|=val>>>16;  dt[o+1]|=val>>>8;  dt[o+2]|=val;  }\n\n\nUTIF.decode._getbithuff = function(data,prm,nbits, huff) {\n\tvar zero_after_ff = 0;\n\tvar get_byte = UTIF.decode._get_byte;\n\tvar c;\n  \n\tvar off=prm[0], bitbuf=prm[1], vbits=prm[2], reset=prm[3];\n\n\t//if (nbits > 25) return 0;\n\t//if (nbits <  0) return bitbuf = vbits = reset = 0;\n\tif (nbits == 0 || vbits < 0) return 0; \n\twhile (!reset && vbits < nbits && (c = data[off++]) != -1 &&\n\t\t!(reset = zero_after_ff && c == 0xff && data[off++])) {\n\t\t//console.log(\"byte read into c\");\n\t\tbitbuf = (bitbuf << 8) + c;\n\t\tvbits += 8;\n\t} \n\tc = (bitbuf << (32-vbits)) >>> (32-nbits);\n\tif (huff) {\n\t\tvbits -= huff[c+1] >>> 8;  //console.log(c, huff[c]>>8);\n\t\tc =  huff[c+1]&255;\n\t} else\n\t\tvbits -= nbits;\n\tif (vbits < 0) throw \"e\";\n  \n\tprm[0]=off;  prm[1]=bitbuf;  prm[2]=vbits;  prm[3]=reset;\n  \n\treturn c;\n}\n\nUTIF.decode._make_decoder = function(source) {\n\tvar max, len, h, i, j;\n\tvar huff = [];\n\n\tfor (max=16; max!=0 && !source[max]; max--);\n\tvar si=17;\n\t\n\thuff[0] = max;\n\tfor (h=len=1; len <= max; len++)\n\t\tfor (i=0; i < source[len]; i++, ++si)\n\t\t\tfor (j=0; j < 1 << (max-len); j++)\n\t\t\t\tif (h <= 1 << max)\n\t\t\t\t\thuff[h++] = (len << 8) | source[si];\n\treturn huff;\n}\n\nUTIF.decode._decodeNewJPEG = function(img, data, off, len, tgt, toff)\n{\n\tvar tables = img[\"t347\"], tlen = tables ? tables.length : 0, buff = new Uint8Array(tlen + len);\n\t\n\tif (tables) {\n\t\tvar SOI = 216, EOI = 217, boff = 0;\n\t\tfor (var i=0; i<(tlen-1); i++)\n\t\t{\n\t\t\t// Skip EOI marker from JPEGTables\n\t\t\tif (tables[i]==255 && tables[i+1]==EOI) break;\n\t\t\tbuff[boff++] = tables[i];\n\t\t}\n\n\t\t// Skip SOI marker from data\n\t\tvar byte1 = data[off], byte2 = data[off + 1];\n\t\tif (byte1!=255 || byte2!=SOI)\n\t\t{\n\t\t\tbuff[boff++] = byte1;\n\t\t\tbuff[boff++] = byte2;\n\t\t}\n\t\tfor (var i=2; i<len; i++) buff[boff++] = data[off+i];\n\t}\n\telse for (var i=0; i<len; i++) buff[i] = data[off+i];\n\n\tif(img[\"t262\"][0]==32803 || img[\"t262\"][0]==34892) // lossless JPEG and lossy JPEG (used in DNG files)\n\t{\n\t\tvar bps = img[\"t258\"][0];//, dcdr = new LosslessJpegDecoder();\n\t\tvar out = UTIF.LosslessJpegDecode(buff), olen=out.length;  //console.log(olen);\n\t\t\n\t\tif(false) {}\n\t\telse if(bps==16) {\n\t\t\tif(img.isLE) for(var i=0; i<olen; i++ ) {  tgt[toff+(i<<1)] = (out[i]&255);  tgt[toff+(i<<1)+1] = (out[i]>>>8);  }\n\t\t\telse         for(var i=0; i<olen; i++ ) {  tgt[toff+(i<<1)] = (out[i]>>>8);  tgt[toff+(i<<1)+1] = (out[i]&255);  }\n\t\t}\n\t\telse if(bps==14 || bps==12) {  // 4 * 14 == 56 == 7 * 8\n\t\t\tvar rst = 16-bps;\n\t\t\tfor(var i=0; i<olen; i++) UTIF.decode._putsF(tgt, i*bps, out[i]<<rst);\n\t\t}\n\t\telse throw new Error(\"unsupported bit depth \"+bps);\n\t}\n\telse\n\t{\n\t\tvar parser = new UTIF.JpegDecoder();  parser.parse(buff);\n\t\tvar decoded = parser.getData(parser.width, parser.height);\n\t\tfor (var i=0; i<decoded.length; i++) tgt[toff + i] = decoded[i];\n\t}\n\n\t// PhotometricInterpretation is 6 (YCbCr) for JPEG, but after decoding we populate data in\n\t// RGB format, so updating the tag value\n\tif(img[\"t262\"][0] == 6)  img[\"t262\"][0] = 2;\n}\n\nUTIF.decode._decodeOldJPEGInit = function(img, data, off, len)\n{\n\tvar SOI = 216, EOI = 217, DQT = 219, DHT = 196, DRI = 221, SOF0 = 192, SOS = 218;\n\tvar joff = 0, soff = 0, tables, sosMarker, isTiled = false, i, j, k;\n\tvar jpgIchgFmt    = img[\"t513\"], jifoff = jpgIchgFmt ? jpgIchgFmt[0] : 0;\n\tvar jpgIchgFmtLen = img[\"t514\"], jiflen = jpgIchgFmtLen ? jpgIchgFmtLen[0] : 0;\n\tvar soffTag       = img[\"t324\"] || img[\"t273\"] || jpgIchgFmt;\n\tvar ycbcrss       = img[\"t530\"], ssx = 0, ssy = 0;\n\tvar spp           = img[\"t277\"]?img[\"t277\"][0]:1;\n\tvar jpgresint     = img[\"t515\"];\n\n\tif(soffTag)\n\t{\n\t\tsoff = soffTag[0];\n\t\tisTiled = (soffTag.length > 1);\n\t}\n\n\tif(!isTiled)\n\t{\n\t\tif(data[off]==255 && data[off+1]==SOI) return { jpegOffset: off };\n\t\tif(jpgIchgFmt!=null)\n\t\t{\n\t\t\tif(data[off+jifoff]==255 && data[off+jifoff+1]==SOI) joff = off+jifoff;\n\t\t\telse log(\"JPEGInterchangeFormat does not point to SOI\");\n\n\t\t\tif(jpgIchgFmtLen==null) log(\"JPEGInterchangeFormatLength field is missing\");\n\t\t\telse if(jifoff >= soff || (jifoff+jiflen) <= soff) log(\"JPEGInterchangeFormatLength field value is invalid\");\n\n\t\t\tif(joff != null) return { jpegOffset: joff };\n\t\t}\n\t}\n\n\tif(ycbcrss!=null) {  ssx = ycbcrss[0];  ssy = ycbcrss[1];  }\n\n\tif(jpgIchgFmt!=null)\n\t\tif(jpgIchgFmtLen!=null)\n\t\t\tif(jiflen >= 2 && (jifoff+jiflen) <= soff)\n\t\t\t{\n\t\t\t\tif(data[off+jifoff+jiflen-2]==255 && data[off+jifoff+jiflen-1]==SOI) tables = new Uint8Array(jiflen-2);\n\t\t\t\telse tables = new Uint8Array(jiflen);\n\n\t\t\t\tfor(i=0; i<tables.length; i++) tables[i] = data[off+jifoff+i];\n\t\t\t\tlog(\"Incorrect JPEG interchange format: using JPEGInterchangeFormat offset to derive tables\");\n\t\t\t}\n\t\t\telse log(\"JPEGInterchangeFormat+JPEGInterchangeFormatLength > offset to first strip or tile\");\n\n\tif(tables == null)\n\t{\n\t\tvar ooff = 0, out = [];\n\t\tout[ooff++] = 255; out[ooff++] = SOI;\n\n\t\tvar qtables = img[\"t519\"];\n\t\tif(qtables==null) throw new Error(\"JPEGQTables tag is missing\");\n\t\tfor(i=0; i<qtables.length; i++)\n\t\t{\n\t\t\tout[ooff++] = 255; out[ooff++] = DQT; out[ooff++] = 0; out[ooff++] = 67; out[ooff++] = i;\n\t\t\tfor(j=0; j<64; j++) out[ooff++] = data[off+qtables[i]+j];\n\t\t}\n\n\t\tfor(k=0; k<2; k++)\n\t\t{\n\t\t\tvar htables = img[(k == 0) ? \"t520\" : \"t521\"];\n\t\t\tif(htables==null) throw new Error(((k == 0) ? \"JPEGDCTables\" : \"JPEGACTables\") + \" tag is missing\");\n\t\t\tfor(i=0; i<htables.length; i++)\n\t\t\t{\n\t\t\t\tout[ooff++] = 255; out[ooff++] = DHT;\n\t\t\t\t//out[ooff++] = 0; out[ooff++] = 67; out[ooff++] = i;\n\t\t\t\tvar nc = 19;\n\t\t\t\tfor(j=0; j<16; j++) nc += data[off+htables[i]+j];\n\n\t\t\t\tout[ooff++] = (nc >>> 8); out[ooff++] = nc & 255;\n\t\t\t\tout[ooff++] = (i | (k << 4));\n\t\t\t\tfor(j=0; j<16; j++) out[ooff++] = data[off+htables[i]+j];\n\t\t\t\tfor(j=0; j<nc; j++) out[ooff++] = data[off+htables[i]+16+j];\n\t\t\t}\n\t\t}\n\n\t\tout[ooff++] = 255; out[ooff++] = SOF0;\n\t\tout[ooff++] = 0;  out[ooff++] = 8 + 3*spp;  out[ooff++] = 8;\n\t\tout[ooff++] = (img.height >>> 8) & 255;  out[ooff++] = img.height & 255;\n\t\tout[ooff++] = (img.width  >>> 8) & 255;  out[ooff++] = img.width  & 255;\n\t\tout[ooff++] = spp;\n\t\tif(spp==1) {  out[ooff++] = 1;  out[ooff++] = 17;  out[ooff++] = 0;  }\n\t\telse for(i=0; i<3; i++)\n\t\t{\n\t\t\tout[ooff++] = i + 1;\n\t\t\tout[ooff++] = (i != 0) ? 17 : (((ssx & 15) << 4) | (ssy & 15));\n\t\t\tout[ooff++] = i;\n\t\t}\n\n\t\tif(jpgresint!=null && jpgresint[0]!=0)\n\t\t{\n\t\t\tout[ooff++] = 255;  out[ooff++] = DRI;  out[ooff++] = 0;  out[ooff++] = 4;\n\t\t\tout[ooff++] = (jpgresint[0] >>> 8) & 255;\n\t\t\tout[ooff++] = jpgresint[0] & 255;\n\t\t}\n\n\t\ttables = new Uint8Array(out);\n\t}\n\n\tvar sofpos = -1;\n\ti = 0;\n\twhile(i < (tables.length - 1)) {\n\t\tif(tables[i]==255 && tables[i+1]==SOF0) {  sofpos = i; break;  }\n\t\ti++;\n\t}\n\n\tif(sofpos == -1)\n\t{\n\t\tvar tmptab = new Uint8Array(tables.length + 10 + 3*spp);\n\t\ttmptab.set(tables);\n\t\tvar tmpoff = tables.length;\n\t\tsofpos = tables.length;\n\t\ttables = tmptab;\n\n\t\ttables[tmpoff++] = 255; tables[tmpoff++] = SOF0;\n\t\ttables[tmpoff++] = 0;  tables[tmpoff++] = 8 + 3*spp;  tables[tmpoff++] = 8;\n\t\ttables[tmpoff++] = (img.height >>> 8) & 255;  tables[tmpoff++] = img.height & 255;\n\t\ttables[tmpoff++] = (img.width  >>> 8) & 255;  tables[tmpoff++] = img.width  & 255;\n\t\ttables[tmpoff++] = spp;\n\t\tif(spp==1) {  tables[tmpoff++] = 1;  tables[tmpoff++] = 17;  tables[tmpoff++] = 0;  }\n\t\telse for(i=0; i<3; i++)\n\t\t{\n\t\t\ttables[tmpoff++] = i + 1;\n\t\t\ttables[tmpoff++] = (i != 0) ? 17 : (((ssx & 15) << 4) | (ssy & 15));\n\t\t\ttables[tmpoff++] = i;\n\t\t}\n\t}\n\n\tif(data[soff]==255 && data[soff+1]==SOS)\n\t{\n\t\tvar soslen = (data[soff+2]<<8) | data[soff+3];\n\t\tsosMarker = new Uint8Array(soslen+2);\n\t\tsosMarker[0] = data[soff];  sosMarker[1] = data[soff+1]; sosMarker[2] = data[soff+2];  sosMarker[3] = data[soff+3];\n\t\tfor(i=0; i<(soslen-2); i++) sosMarker[i+4] = data[soff+i+4];\n\t}\n\telse\n\t{\n\t\tsosMarker = new Uint8Array(2 + 6 + 2*spp);\n\t\tvar sosoff = 0;\n\t\tsosMarker[sosoff++] = 255;  sosMarker[sosoff++] = SOS;\n\t\tsosMarker[sosoff++] = 0;  sosMarker[sosoff++] = 6 + 2*spp;  sosMarker[sosoff++] = spp;\n\t\tif(spp==1) {  sosMarker[sosoff++] = 1;  sosMarker[sosoff++] = 0;  }\n\t\telse for(i=0; i<3; i++)\n\t\t{\n\t\t\tsosMarker[sosoff++] = i+1;  sosMarker[sosoff++] = (i << 4) | i;\n\t\t}\n\t\tsosMarker[sosoff++] = 0;  sosMarker[sosoff++] = 63;  sosMarker[sosoff++] = 0;\n\t}\n\n\treturn { jpegOffset: off, tables: tables, sosMarker: sosMarker, sofPosition: sofpos };\n}\n\nUTIF.decode._decodeOldJPEG = function(img, data, off, len, tgt, toff)\n{\n\tvar i, dlen, tlen, buff, buffoff;\n\tvar jpegData = UTIF.decode._decodeOldJPEGInit(img, data, off, len);\n\n\tif(jpegData.jpegOffset!=null)\n\t{\n\t\tdlen = off+len-jpegData.jpegOffset;\n\t\tbuff = new Uint8Array(dlen);\n\t\tfor(i=0; i<dlen; i++) buff[i] = data[jpegData.jpegOffset+i];\n\t}\n\telse\n\t{\n\t\ttlen = jpegData.tables.length;\n\t\tbuff = new Uint8Array(tlen + jpegData.sosMarker.length + len + 2);\n\t\tbuff.set(jpegData.tables);\n\t\tbuffoff = tlen;\n\n\t\tbuff[jpegData.sofPosition+5] = (img.height >>> 8) & 255;  buff[jpegData.sofPosition+6] = img.height & 255;\n\t\tbuff[jpegData.sofPosition+7] = (img.width  >>> 8) & 255;  buff[jpegData.sofPosition+8] = img.width  & 255;\n\n\t\tif(data[off]!=255 || data[off+1]!=SOS)\n\t\t{\n\t\t\tbuff.set(jpegData.sosMarker, buffoff);\n\t\t\tbuffoff += sosMarker.length;\n\t\t}\n\t\tfor(i=0; i<len; i++) buff[buffoff++] = data[off+i];\n\t\tbuff[buffoff++] = 255;  buff[buffoff++] = EOI;\n\t}\n\n\tvar parser = new UTIF.JpegDecoder();  parser.parse(buff);\n\tvar decoded = parser.getData(parser.width, parser.height);\n\tfor (var i=0; i<decoded.length; i++) tgt[toff + i] = decoded[i];\n\n\t// PhotometricInterpretation is 6 (YCbCr) for JPEG, but after decoding we populate data in\n\t// RGB format, so updating the tag value\n\tif(img[\"t262\"] && img[\"t262\"][0] == 6)  img[\"t262\"][0] = 2;\n}\n\nUTIF.decode._decodePackBits = function(data, off, len, tgt, toff)\n{\n\tvar sa = new Int8Array(data.buffer), ta = new Int8Array(tgt.buffer), lim = off+len;\n\twhile(off<lim)\n\t{\n\t\tvar n = sa[off];  off++;\n\t\tif(n>=0  && n<128)    for(var i=0; i< n+1; i++) {  ta[toff]=sa[off];  toff++;  off++;   }\n\t\tif(n>=-127 && n<0) {  for(var i=0; i<-n+1; i++) {  ta[toff]=sa[off];  toff++;           }  off++;  }\n\t}\n}\n\nUTIF.decode._decodeThunder = function(data, off, len, tgt, toff)\n{\n\tvar d2 = [ 0, 1, 0, -1 ],  d3 = [ 0, 1, 2, 3, 0, -3, -2, -1 ];\n\tvar lim = off+len, qoff = toff*2, px = 0;\n\twhile(off<lim)\n\t{\n\t\tvar b = data[off], msk = (b>>>6), n = (b&63);  off++;\n\t\tif(msk==3) { px=(n&15);  tgt[qoff>>>1] |= (px<<(4*(1-qoff&1)));  qoff++;   }\n\t\tif(msk==0) for(var i=0; i<n; i++) {  tgt[qoff>>>1] |= (px<<(4*(1-qoff&1)));  qoff++;   }\n\t\tif(msk==2) for(var i=0; i<2; i++) {  var d=(n>>>(3*(1-i)))&7;  if(d!=4) { px+=d3[d];  tgt[qoff>>>1] |= (px<<(4*(1-qoff&1)));  qoff++; }  }\n\t\tif(msk==1) for(var i=0; i<3; i++) {  var d=(n>>>(2*(2-i)))&3;  if(d!=2) { px+=d2[d];  tgt[qoff>>>1] |= (px<<(4*(1-qoff&1)));  qoff++; }  }\n\t}\n}\n\nUTIF.decode._dmap = { \"1\":0,\"011\":1,\"000011\":2,\"0000011\":3, \"010\":-1,\"000010\":-2,\"0000010\":-3  };\nUTIF.decode._lens = ( function()\n{\n\tvar addKeys = function(lens, arr, i0, inc) {  for(var i=0; i<arr.length; i++) lens[arr[i]] = i0 + i*inc;  }\n\n\tvar termW = \"00110101,000111,0111,1000,1011,1100,1110,1111,10011,10100,00111,01000,001000,000011,110100,110101,\" // 15\n\t+ \"101010,101011,0100111,0001100,0001000,0010111,0000011,0000100,0101000,0101011,0010011,0100100,0011000,00000010,00000011,00011010,\" // 31\n\t+ \"00011011,00010010,00010011,00010100,00010101,00010110,00010111,00101000,00101001,00101010,00101011,00101100,00101101,00000100,00000101,00001010,\" // 47\n\t+ \"00001011,01010010,01010011,01010100,01010101,00100100,00100101,01011000,01011001,01011010,01011011,01001010,01001011,00110010,00110011,00110100\";\n\n\tvar termB = \"0000110111,010,11,10,011,0011,0010,00011,000101,000100,0000100,0000101,0000111,00000100,00000111,000011000,\" // 15\n\t+ \"0000010111,0000011000,0000001000,00001100111,00001101000,00001101100,00000110111,00000101000,00000010111,00000011000,000011001010,000011001011,000011001100,000011001101,000001101000,000001101001,\" // 31\n\t+ \"000001101010,000001101011,000011010010,000011010011,000011010100,000011010101,000011010110,000011010111,000001101100,000001101101,000011011010,000011011011,000001010100,000001010101,000001010110,000001010111,\" // 47\n\t+ \"000001100100,000001100101,000001010010,000001010011,000000100100,000000110111,000000111000,000000100111,000000101000,000001011000,000001011001,000000101011,000000101100,000001011010,000001100110,000001100111\";\n\n\tvar makeW = \"11011,10010,010111,0110111,00110110,00110111,01100100,01100101,01101000,01100111,011001100,011001101,011010010,011010011,011010100,011010101,011010110,\"\n\t+ \"011010111,011011000,011011001,011011010,011011011,010011000,010011001,010011010,011000,010011011\";\n\n\tvar makeB = \"0000001111,000011001000,000011001001,000001011011,000000110011,000000110100,000000110101,0000001101100,0000001101101,0000001001010,0000001001011,0000001001100,\"\n\t+ \"0000001001101,0000001110010,0000001110011,0000001110100,0000001110101,0000001110110,0000001110111,0000001010010,0000001010011,0000001010100,0000001010101,0000001011010,\"\n\t+ \"0000001011011,0000001100100,0000001100101\";\n\n\tvar makeA = \"00000001000,00000001100,00000001101,000000010010,000000010011,000000010100,000000010101,000000010110,000000010111,000000011100,000000011101,000000011110,000000011111\";\n\n\ttermW = termW.split(\",\");  termB = termB.split(\",\");  makeW = makeW.split(\",\");  makeB = makeB.split(\",\");  makeA = makeA.split(\",\");\n\n\tvar lensW = {}, lensB = {};\n\taddKeys(lensW, termW, 0, 1);  addKeys(lensW, makeW, 64,64);  addKeys(lensW, makeA, 1792,64);\n\taddKeys(lensB, termB, 0, 1);  addKeys(lensB, makeB, 64,64);  addKeys(lensB, makeA, 1792,64);\n\treturn [lensW, lensB];\n} )();\n\nUTIF.decode._decodeG4 = function(data, off, slen, tgt, toff, w, fo)\n{\n\tvar U = UTIF.decode, boff=off<<3, len=0, wrd=\"\";\t// previous starts with 1\n\tvar line=[], pline=[];  for(var i=0; i<w; i++) pline.push(0);  pline=U._makeDiff(pline);\n\tvar a0=0, a1=0, a2=0, b1=0, b2=0, clr=0;\n\tvar y=0, mode=\"\", toRead=0;\n\tvar bipl = Math.ceil(w/8)*8;\n\n\twhile((boff>>>3)<off+slen)\n\t{\n\t\tb1 = U._findDiff(pline, a0+(a0==0?0:1), 1-clr), b2 = U._findDiff(pline, b1, clr);\t// could be precomputed\n\t\tvar bit =0;\n\t\tif(fo==1) bit = (data[boff>>>3]>>>(7-(boff&7)))&1;\n\t\tif(fo==2) bit = (data[boff>>>3]>>>(  (boff&7)))&1;\n\t\tboff++;  wrd+=bit;\n\t\tif(mode==\"H\")\n\t\t{\n\t\t\tif(U._lens[clr][wrd]!=null)\n\t\t\t{\n\t\t\t\tvar dl=U._lens[clr][wrd];  wrd=\"\";  len+=dl;\n\t\t\t\tif(dl<64) {  U._addNtimes(line,len,clr);  a0+=len;  clr=1-clr;  len=0;  toRead--;  if(toRead==0) mode=\"\";  }\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif(wrd==\"0001\")  {  wrd=\"\";  U._addNtimes(line,b2-a0,clr);  a0=b2;   }\n\t\t\tif(wrd==\"001\" )  {  wrd=\"\";  mode=\"H\";  toRead=2;  }\n\t\t\tif(U._dmap[wrd]!=null) {  a1 = b1+U._dmap[wrd];  U._addNtimes(line, a1-a0, clr);  a0=a1;  wrd=\"\";  clr=1-clr;  }\n\t\t}\n\t\tif(line.length==w && mode==\"\")\n\t\t{\n\t\t\tU._writeBits(line, tgt, toff*8+y*bipl);\n\t\t\tclr=0;  y++;  a0=0;\n\t\t\tpline=U._makeDiff(line);  line=[];\n\t\t}\n\t\t//if(wrd.length>150) {  log(wrd);  break;  throw \"e\";  }\n\t}\n}\n\nUTIF.decode._findDiff = function(line, x, clr) {  for(var i=0; i<line.length; i+=2) if(line[i]>=x && line[i+1]==clr)  return line[i];  }\n\nUTIF.decode._makeDiff = function(line)\n{\n\tvar out = [];  if(line[0]==1) out.push(0,1);\n\tfor(var i=1; i<line.length; i++) if(line[i-1]!=line[i]) out.push(i, line[i]);\n\tout.push(line.length,0,line.length,1);  return out;\n}\n\nUTIF.decode._decodeG3 = function(data, off, slen, tgt, toff, w, fo)\n{\n\tvar U = UTIF.decode, boff=off<<3, len=0, wrd=\"\";\n\tvar line=[], pline=[];  for(var i=0; i<w; i++) line.push(0);\n\tvar a0=0, a1=0, a2=0, b1=0, b2=0, clr=0;\n\tvar y=-1, mode=\"\", toRead=0, is1D=false;\n\tvar bipl = Math.ceil(w/8)*8;\n\twhile((boff>>>3)<off+slen)\n\t{\n\t\tb1 = U._findDiff(pline, a0+(a0==0?0:1), 1-clr), b2 = U._findDiff(pline, b1, clr);\t// could be precomputed\n\t\tvar bit =0;\n\t\tif(fo==1) bit = (data[boff>>>3]>>>(7-(boff&7)))&1;\n\t\tif(fo==2) bit = (data[boff>>>3]>>>(  (boff&7)))&1;\n\t\tboff++;  wrd+=bit;\n\n\t\tif(is1D)\n\t\t{\n\t\t\tif(U._lens[clr][wrd]!=null)\n\t\t\t{\n\t\t\t\tvar dl=U._lens[clr][wrd];  wrd=\"\";  len+=dl;\n\t\t\t\tif(dl<64) {  U._addNtimes(line,len,clr);  clr=1-clr;  len=0;  }\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif(mode==\"H\")\n\t\t\t{\n\t\t\t\tif(U._lens[clr][wrd]!=null)\n\t\t\t\t{\n\t\t\t\t\tvar dl=U._lens[clr][wrd];  wrd=\"\";  len+=dl;\n\t\t\t\t\tif(dl<64) {  U._addNtimes(line,len,clr);  a0+=len;  clr=1-clr;  len=0;  toRead--;  if(toRead==0) mode=\"\";  }\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif(wrd==\"0001\")  {  wrd=\"\";  U._addNtimes(line,b2-a0,clr);  a0=b2;   }\n\t\t\t\tif(wrd==\"001\" )  {  wrd=\"\";  mode=\"H\";  toRead=2;  }\n\t\t\t\tif(U._dmap[wrd]!=null) {  a1 = b1+U._dmap[wrd];  U._addNtimes(line, a1-a0, clr);  a0=a1;  wrd=\"\";  clr=1-clr;  }\n\t\t\t}\n\t\t}\n\t\tif(wrd.endsWith(\"000000000001\")) // needed for some files\n\t\t{\n\t\t\tif(y>=0) U._writeBits(line, tgt, toff*8+y*bipl);\n\t\t\tif(fo==1) is1D = ((data[boff>>>3]>>>(7-(boff&7)))&1)==1;\n\t\t\tif(fo==2) is1D = ((data[boff>>>3]>>>(  (boff&7)))&1)==1;\n\t\t\tboff++;\n\t\t\tif(U._decodeG3.allow2D==null) U._decodeG3.allow2D=is1D;\n\t\t\tif(!U._decodeG3.allow2D) {  is1D = true;  boff--;  }\n\t\t\t//log(\"EOL\",y, \"next 1D:\", is1D);\n\t\t\twrd=\"\";  clr=0;  y++;  a0=0;\n\t\t\tpline=U._makeDiff(line);  line=[];\n\t\t}\n\t}\n\tif(line.length==w) U._writeBits(line, tgt, toff*8+y*bipl);\n}\n\nUTIF.decode._addNtimes = function(arr, n, val) {  for(var i=0; i<n; i++) arr.push(val);  }\n\nUTIF.decode._writeBits = function(bits, tgt, boff)\n{\n\tfor(var i=0; i<bits.length; i++) tgt[(boff+i)>>>3] |= (bits[i]<<(7-((boff+i)&7)));\n}\n\nUTIF.decode._decodeLZW = function(data, off, tgt, toff)\n{\n\tif(UTIF.decode._lzwTab==null)\n\t{\n\t\tvar tb=new Uint32Array(0xffff), tn=new Uint16Array(0xffff), chr=new Uint8Array(2e6);\n\t\tfor(var i=0; i<256; i++) { chr[i<<2]=i;  tb[i]=i<<2;  tn[i]=1;  }\n\t\tUTIF.decode._lzwTab = [tb,tn,chr];\n\t}\n\tvar copy = UTIF.decode._copyData;\n\tvar tab = UTIF.decode._lzwTab[0], tln=UTIF.decode._lzwTab[1], chr=UTIF.decode._lzwTab[2], totl = 258, chrl = 258<<2;\n\tvar bits = 9, boff = off<<3;  // offset in bits\n\n\tvar ClearCode = 256, EoiCode = 257;\n\tvar v = 0, Code = 0, OldCode = 0;\n\twhile(true)\n\t{\n\t\tv = (data[boff>>>3]<<16) | (data[(boff+8)>>>3]<<8) | data[(boff+16)>>>3];\n\t\tCode = ( v>>(24-(boff&7)-bits) )    &   ((1<<bits)-1);  boff+=bits;\n\n\t\tif(Code==EoiCode) break;\n\t\tif(Code==ClearCode)\n\t\t{\n\t\t\tbits=9;  totl = 258;  chrl = 258<<2;\n\n\t\t\tv = (data[boff>>>3]<<16) | (data[(boff+8)>>>3]<<8) | data[(boff+16)>>>3];\n\t\t\tCode = ( v>>(24-(boff&7)-bits) )    &   ((1<<bits)-1);  boff+=bits;\n\t\t\tif(Code==EoiCode) break;\n\t\t\ttgt[toff]=Code;  toff++;\n\t\t}\n\t\telse if(Code<totl)\n\t\t{\n\t\t\tvar cd = tab[Code], cl = tln[Code];\n\t\t\tcopy(chr,cd,tgt,toff,cl);  toff += cl;\n\n\t\t\tif(OldCode>=totl) {  tab[totl] = chrl;  chr[tab[totl]] = cd[0];  tln[totl]=1;  chrl=(chrl+1+3)&~0x03;  totl++;  }\n\t\t\telse\n\t\t\t{\n\t\t\t\ttab[totl] = chrl;\n\t\t\t\tvar nit = tab[OldCode], nil = tln[OldCode];\n\t\t\t\tcopy(chr,nit,chr,chrl,nil);\n\t\t\t\tchr[chrl+nil]=chr[cd];  nil++;\n\t\t\t\ttln[totl]=nil;  totl++;\n\n\t\t\t\tchrl=(chrl+nil+3)&~0x03;\n\t\t\t}\n\t\t\tif(totl+1==(1<<bits)) bits++;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif(OldCode>=totl) {  tab[totl] = chrl;  tln[totl]=0;  totl++;  }\n\t\t\telse\n\t\t\t{\n\t\t\t\ttab[totl] = chrl;\n\t\t\t\tvar nit = tab[OldCode], nil = tln[OldCode];\n\t\t\t\tcopy(chr,nit,chr,chrl,nil);\n\t\t\t\tchr[chrl+nil]=chr[chrl];  nil++;\n\t\t\t\ttln[totl]=nil;  totl++;\n\n\t\t\t\tcopy(chr,chrl,tgt,toff,nil);  toff += nil;\n\t\t\t\tchrl=(chrl+nil+3)&~0x03;\n\t\t\t}\n\t\t\tif(totl+1==(1<<bits)) bits++;\n\t\t}\n\t\tOldCode = Code;\n\t}\n}\n\nUTIF.decode._copyData = function(s,so,t,to,l) {  for(var i=0;i<l;i+=4) {  t[to+i]=s[so+i];  t[to+i+1]=s[so+i+1];  t[to+i+2]=s[so+i+2];  t[to+i+3]=s[so+i+3];  }  }\n\nUTIF.tags = {};\nUTIF.ttypes = {  256:3,257:3,258:3,   259:3, 262:3,  273:4,  274:3, 277:3,278:4,279:4, 282:5, 283:5, 284:3, 286:5,287:5, 296:3, 305:2, 306:2, 338:3, 513:4, 514:4, 34665:4  };\n\nUTIF._readIFD = function(bin, data, offset, ifds, depth, debug)\n{\n\tvar cnt = bin.readUshort(data, offset);  offset+=2;\n\tvar ifd = {};  ifds.push(ifd);\n\n\tif(debug) log(\"   \".repeat(depth),ifds.length-1,\">>>----------------\");\n\tfor(var i=0; i<cnt; i++)\n\t{\n\t\tvar tag  = bin.readUshort(data, offset);    offset+=2;\n\t\tvar type = bin.readUshort(data, offset);    offset+=2;\n\t\tvar num  = bin.readUint  (data, offset);    offset+=4;\n\t\tvar voff = bin.readUint  (data, offset);    offset+=4;\n\t\t//if(tag==33723) {type=1; num*=4;}//console.log(type,num,voff);//type = 1;  // IPTC/NAA\n\n\t\tvar arr = [];\n\t\t//ifd[\"t\"+tag+\"-\"+UTIF.tags[tag]] = arr;\n\t\tif(type== 1 || type==7) {  arr = new Uint8Array(data.buffer, (num<5 ? offset-4 : voff), num);  }\n\t\tif(type== 2) {  var o0 = (num<5 ? offset-4 : voff), c=data[o0];  \n\t\t\t\t\t\tif(c<128) arr.push( bin.readASCII(data, o0, num-1) );\n\t\t\t\t\t\telse      arr = new Uint8Array(data.buffer, o0, num-1);  }\n\t\tif(type== 3) {  for(var j=0; j<num; j++) arr.push(bin.readUshort(data, (num<3 ? offset-4 : voff)+2*j));  }\n\t\tif(type== 4) {  for(var j=0; j<num; j++) arr.push(bin.readUint  (data, (num<2 ? offset-4 : voff)+4*j));  }\n\t\tif(type== 5) {  for(var j=0; j<num; j++) arr.push(bin.readUint  (data, voff+j*8) / bin.readUint(data,voff+j*8+4));  }\n\t\tif(type== 8) {  for(var j=0; j<num; j++) arr.push(bin.readShort (data, (num<3 ? offset-4 : voff)+2*j));  }\n\t\tif(type== 9) {  for(var j=0; j<num; j++) arr.push(bin.readInt   (data, (num<2 ? offset-4 : voff)+4*j));  }\n\t\tif(type==10) {  for(var j=0; j<num; j++) arr.push(bin.readInt   (data, voff+j*8) / bin.readInt (data,voff+j*8+4));  }\n\t\tif(type==11) {  for(var j=0; j<num; j++) arr.push(bin.readFloat (data, voff+j*4));  }\n\t\tif(type==12) {  for(var j=0; j<num; j++) arr.push(bin.readDouble(data, voff+j*8));  }\n\t\t\n\t\tifd[\"t\"+tag] = arr;\n\t\t\n\t\tif(num!=0 && arr.length==0) {  log(\"unknown TIFF tag type: \", type, \"num:\",num);  }\n\t\tif(debug) log(\"   \".repeat(depth), tag, type, UTIF.tags[tag], arr);\n\t\t\n\t\tif(tag==330 && ifd[\"t272\"] && ifd[\"t272\"][0]==\"DSLR-A100\") {  } \n\t\t// ifd[\"t258\"]=[12];  ifd[\"t259\"]=[32767];  ifd[\"t273\"]=[offset+arr[0]];  ifd[\"t277\"]=[1];  ifd[\"t279\"]=[1];  ifd[\"t33421\"]=[2,2];  ifd[\"t33422\"]=[0,1,1,2];\n\t\telse if(tag==330 || tag==34665 || (tag==50740 && bin.readUshort(data,bin.readUint(arr,0))<300  )) {\n\t\t\tvar oarr = tag==50740 ? [bin.readUint(arr,0)] : arr;\n\t\t\tvar subfd = [];\n\t\t\tfor(var j=0; j<oarr.length; j++) UTIF._readIFD(bin, data, oarr[j], subfd, depth+1, debug);\n\t\t\tif(tag==  330) ifd.subIFD = subfd;\n\t\t\tif(tag==34665) ifd.exifIFD = subfd[0];\n\t\t\tif(tag==50740) ifd.dngPrvt = subfd[0];\n\t\t}\n\t\tif(tag==37500) {\n\t\t\tvar mn = arr;\n\t\t\t//console.log(bin.readASCII(mn,0,mn.length), mn);\n\t\t\tif(bin.readASCII(mn,0,5)==\"Nikon\")  ifd.makerNote = UTIF[\"decode\"](mn.slice(10).buffer)[0];\n\t\t\telse if(bin.readUshort(data,voff)<300){\n\t\t\t\tvar subsub=[];  UTIF._readIFD(bin, data, voff, subsub, depth+1, debug);\n\t\t\t\tifd.makerNote = subsub[0];\n\t\t\t}\n\t\t}\n\t}\n\tif(debug) log(\"   \".repeat(depth),\"<<<---------------\");\n\treturn offset;\n}\n\nUTIF._writeIFD = function(bin, data, offset, ifd)\n{\n\tvar keys = Object.keys(ifd);\n\tbin.writeUshort(data, offset, keys.length);  offset+=2;\n\n\tvar eoff = offset + keys.length*12 + 4;\n\n\tfor(var ki=0; ki<keys.length; ki++)\n\t{\n\t\tvar key = keys[ki];\n\t\tvar tag = parseInt(key.slice(1)), type = UTIF.ttypes[tag];  if(type==null) throw new Error(\"unknown type of tag: \"+tag);\n\t\tvar val = ifd[key];  if(type==2) val=val[0]+\"\\u0000\";  var num = val.length;\n\t\tbin.writeUshort(data, offset, tag );  offset+=2;\n\t\tbin.writeUshort(data, offset, type);  offset+=2;\n\t\tbin.writeUint  (data, offset, num );  offset+=4;\n\n\t\tvar dlen = [-1, 1, 1, 2, 4, 8, 0, 0, 0, 0, 0, 0, 8][type] * num;\n\t\tvar toff = offset;\n\t\tif(dlen>4) {  bin.writeUint(data, offset, eoff);  toff=eoff;  }\n\n\t\tif(type==2) {  bin.writeASCII(data, toff, val);   }\n\t\tif(type==3) {  for(var i=0; i<num; i++) bin.writeUshort(data, toff+2*i, val[i]);    }\n\t\tif(type==4) {  for(var i=0; i<num; i++) bin.writeUint  (data, toff+4*i, val[i]);    }\n\t\tif(type==5) {  for(var i=0; i<num; i++) {  bin.writeUint(data, toff+8*i, Math.round(val[i]*10000));  bin.writeUint(data, toff+8*i+4, 10000);  }   }\n\t\tif (type == 12) {  for (var i = 0; i < num; i++) bin.writeDouble(data, toff + 8 * i, val[i]); }\n\n\t\tif(dlen>4) {  dlen += (dlen&1);  eoff += dlen;  }\n\t\toffset += 4;\n\t}\n\treturn [offset, eoff];\n}\n\nUTIF.toRGBA8 = function(out)\n{\n\tvar w = out.width, h = out.height, area = w*h, qarea = area*4, data = out.data;\n\tvar img = new Uint8Array(area*4);\n\t//console.log(out);\n\t// 0: WhiteIsZero, 1: BlackIsZero, 2: RGB, 3: Palette color, 4: Transparency mask, 5: CMYK\n\tvar intp = (out[\"t262\"] ? out[\"t262\"][0]: 2), bps = (out[\"t258\"]?Math.min(32,out[\"t258\"][0]):1);\n\t//log(\"interpretation: \", intp, \"bps\", bps, out);\n\tif(false) {}\n\telse if(intp==0)\n\t{\n\t\tvar bpl = Math.ceil(bps*w/8);\n\t\tfor(var y=0; y<h; y++) {\n\t\t\tvar off = y*bpl, io = y*w;\n\t\t\tif(bps== 1) for(var i=0; i<w; i++) {  var qi=(io+i)<<2, px=((data[off+(i>>3)])>>(7-  (i&7)))& 1;  img[qi]=img[qi+1]=img[qi+2]=( 1-px)*255;  img[qi+3]=255;    }\n\t\t\tif(bps== 4) for(var i=0; i<w; i++) {  var qi=(io+i)<<2, px=((data[off+(i>>1)])>>(4-4*(i&1)))&15;  img[qi]=img[qi+1]=img[qi+2]=(15-px)* 17;  img[qi+3]=255;    }\n\t\t\tif(bps== 8) for(var i=0; i<w; i++) {  var qi=(io+i)<<2, px=data[off+i];  img[qi]=img[qi+1]=img[qi+2]=255-px;  img[qi+3]=255;    }\n\t\t}\n\t}\n\telse if(intp==1)\n\t{\n\t\tvar bpl = Math.ceil(bps*w/8);\n\t\tfor(var y=0; y<h; y++) {\n\t\t\tvar off = y*bpl, io = y*w;\n\t\t\tif(bps== 1) for(var i=0; i<w; i++) {  var qi=(io+i)<<2, px=((data[off+(i>>3)])>>(7-  (i&7)))&1;   img[qi]=img[qi+1]=img[qi+2]=(px)*255;  img[qi+3]=255;    }\n\t\t\tif(bps== 2) for(var i=0; i<w; i++) {  var qi=(io+i)<<2, px=((data[off+(i>>2)])>>(6-2*(i&3)))&3;   img[qi]=img[qi+1]=img[qi+2]=(px)* 85;  img[qi+3]=255;    }\n\t\t\tif(bps== 8) for(var i=0; i<w; i++) {  var qi=(io+i)<<2, px=data[off+i];  img[qi]=img[qi+1]=img[qi+2]=    px;  img[qi+3]=255;    }\n\t\t\tif(bps==16) for(var i=0; i<w; i++) {  var qi=(io+i)<<2, px=data[off+(2*i+1)];  img[qi]=img[qi+1]=img[qi+2]= Math.min(255,px);  img[qi+3]=255;    } // ladoga.tif\n\t\t}\n\t}\n\telse if(intp==2)\n\t{\n\t\tvar smpls = out[\"t258\"]?out[\"t258\"].length : 3;\n\t\t\n\t\tif(bps== 8) \n\t\t{\n\t\t\tif(smpls==4) for(var i=0; i<qarea; i++) img[i] = data[i];\n\t\t\tif(smpls==3) for(var i=0; i< area; i++) {  var qi=i<<2, ti=i*3;  img[qi]=data[ti];  img[qi+1]=data[ti+1];  img[qi+2]=data[ti+2];  img[qi+3]=255;    }\n\t\t}\n\t\telse{  // 3x 16-bit channel\n\t\t\tif(smpls==4) for(var i=0; i<area; i++) {  var qi=i<<2, ti=i*8+1;  img[qi]=data[ti];  img[qi+1]=data[ti+2];  img[qi+2]=data[ti+4];  img[qi+3]=data[ti+6];    }\n\t\t\tif(smpls==3) for(var i=0; i<area; i++) {  var qi=i<<2, ti=i*6+1;  img[qi]=data[ti];  img[qi+1]=data[ti+2];  img[qi+2]=data[ti+4];  img[qi+3]=255;           }\n\t\t}\n\t}\n\telse if(intp==3)\n\t{\n\t\tvar map = out[\"t320\"];\n\t\tfor(var i=0; i<area; i++) {  var qi=i<<2, mi=data[i];  img[qi]=(map[mi]>>8);  img[qi+1]=(map[256+mi]>>8);  img[qi+2]=(map[512+mi]>>8);  img[qi+3]=255;    }\n\t}\n\telse if(intp==5) \n\t{\n\t\tvar smpls = out[\"t258\"]?out[\"t258\"].length : 4;\n\t\tvar gotAlpha = smpls>4 ? 1 : 0;\n\t\tfor(var i=0; i<area; i++) {\n\t\t\tvar qi=i<<2, si=i*smpls;  var C=255-data[si], M=255-data[si+1], Y=255-data[si+2], K=(255-data[si+3])*(1/255);\n\t\t\timg[qi]=~~(C*K+0.5);  img[qi+1]=~~(M*K+0.5);  img[qi+2]=~~(Y*K+0.5);  img[qi+3]=255*(1-gotAlpha)+data[si+4]*gotAlpha;\n\t\t}\n\t}\n\telse log(\"Unknown Photometric interpretation: \"+intp);\n\treturn img;\n}\n\nUTIF.replaceIMG = function(imgs)\n{\n\tif(imgs==null) imgs = document.getElementsByTagName(\"img\");\n\tvar sufs = [\"tif\",\"tiff\",\"dng\",\"cr2\",\"nef\"]\n\tfor (var i=0; i<imgs.length; i++)\n\t{\n\t\tvar img=imgs[i], src=img.getAttribute(\"src\");  if(src==null) continue;\n\t\tvar suff=src.split(\".\").pop().toLowerCase();\n\t\tif(sufs.indexOf(suff)==-1) continue;\n\t\tvar xhr = new XMLHttpRequest();  UTIF._xhrs.push(xhr);  UTIF._imgs.push(img);\n\t\txhr.open(\"GET\", src);  xhr.responseType = \"arraybuffer\";\n\t\txhr.onload = UTIF._imgLoaded;   xhr.send();\n\t}\n}\n\nUTIF._xhrs = [];  UTIF._imgs = [];\nUTIF._imgLoaded = function(e)\n{\n\tvar buff = e.target.response;\n\tvar ifds = UTIF.decode(buff);  //console.log(ifds);\n\tvar vsns = ifds, ma=0, page=vsns[0];  if(ifds[0].subIFD) vsns = vsns.concat(ifds[0].subIFD);\n\tfor(var i=0; i<vsns.length; i++) {\n\t\tvar img = vsns[i];\n\t\tif(img[\"t258\"]==null || img[\"t258\"].length<3) continue;\n\t\tvar ar = img[\"t256\"]*img[\"t257\"];\n\t\tif(ar>ma) {  ma=ar;  page=img;  }\n\t}\n\tUTIF.decodeImage(buff, page, ifds);\n\tvar rgba = UTIF.toRGBA8(page), w=page.width, h=page.height;\n\tvar ind = UTIF._xhrs.indexOf(e.target), img = UTIF._imgs[ind];\n\tUTIF._xhrs.splice(ind,1);  UTIF._imgs.splice(ind,1);\n\tvar cnv = document.createElement(\"canvas\");  cnv.width=w;  cnv.height=h;\n\tvar ctx = cnv.getContext(\"2d\"), imgd = ctx.createImageData(w,h);\n\tfor(var i=0; i<rgba.length; i++) imgd.data[i]=rgba[i];       ctx.putImageData(imgd,0,0);\n\timg.setAttribute(\"src\",cnv.toDataURL());\n}\n\n\nUTIF._binBE =\n{\n\tnextZero   : function(data, o) {  while(data[o]!=0) o++;  return o;  },\n\treadUshort : function(buff, p) {  return (buff[p]<< 8) |  buff[p+1];  },\n\treadShort  : function(buff, p) {  var a=UTIF._binBE.ui8;  a[0]=buff[p+1];  a[1]=buff[p+0];                                    return UTIF._binBE. i16[0];  },\n\treadInt    : function(buff, p) {  var a=UTIF._binBE.ui8;  a[0]=buff[p+3];  a[1]=buff[p+2];  a[2]=buff[p+1];  a[3]=buff[p+0];  return UTIF._binBE. i32[0];  },\n\treadUint   : function(buff, p) {  var a=UTIF._binBE.ui8;  a[0]=buff[p+3];  a[1]=buff[p+2];  a[2]=buff[p+1];  a[3]=buff[p+0];  return UTIF._binBE.ui32[0];  },\n\treadASCII  : function(buff, p, l) {  var s = \"\";   for(var i=0; i<l; i++) s += String.fromCharCode(buff[p+i]);   return s; },\n\treadFloat  : function(buff, p) {  var a=UTIF._binBE.ui8;  for(var i=0;i<4;i++) a[i]=buff[p+3-i];  return UTIF._binBE.fl32[0];  },\n\treadDouble : function(buff, p) {  var a=UTIF._binBE.ui8;  for(var i=0;i<8;i++) a[i]=buff[p+7-i];  return UTIF._binBE.fl64[0];  },\n\n\twriteUshort: function(buff, p, n) {  buff[p] = (n>> 8)&255;  buff[p+1] =  n&255;  },\n\twriteUint  : function(buff, p, n) {  buff[p] = (n>>24)&255;  buff[p+1] = (n>>16)&255;  buff[p+2] = (n>>8)&255;  buff[p+3] = (n>>0)&255;  },\n\twriteASCII : function(buff, p, s) {  for(var i = 0; i < s.length; i++)  buff[p+i] = s.charCodeAt(i);  },\n\twriteDouble: function(buff, p, n)\n\t{\n\t\tUTIF._binBE.fl64[0] = n;\n\t\tfor (var i = 0; i < 8; i++) buff[p + i] = UTIF._binBE.ui8[7 - i];\n\t}\n}\nUTIF._binBE.ui8  = new Uint8Array  (8);\nUTIF._binBE.i16  = new Int16Array  (UTIF._binBE.ui8.buffer);\nUTIF._binBE.i32  = new Int32Array  (UTIF._binBE.ui8.buffer);\nUTIF._binBE.ui32 = new Uint32Array (UTIF._binBE.ui8.buffer);\nUTIF._binBE.fl32 = new Float32Array(UTIF._binBE.ui8.buffer);\nUTIF._binBE.fl64 = new Float64Array(UTIF._binBE.ui8.buffer);\n\nUTIF._binLE =\n{\n\tnextZero   : UTIF._binBE.nextZero,\n\treadUshort : function(buff, p) {  return (buff[p+1]<< 8) |  buff[p];  },\n\treadShort  : function(buff, p) {  var a=UTIF._binBE.ui8;  a[0]=buff[p+0];  a[1]=buff[p+1];                                    return UTIF._binBE. i16[0];  },\n\treadInt    : function(buff, p) {  var a=UTIF._binBE.ui8;  a[0]=buff[p+0];  a[1]=buff[p+1];  a[2]=buff[p+2];  a[3]=buff[p+3];  return UTIF._binBE. i32[0];  },\n\treadUint   : function(buff, p) {  var a=UTIF._binBE.ui8;  a[0]=buff[p+0];  a[1]=buff[p+1];  a[2]=buff[p+2];  a[3]=buff[p+3];  return UTIF._binBE.ui32[0];  },\n\treadASCII  : UTIF._binBE.readASCII,\n\treadFloat  : function(buff, p) {  var a=UTIF._binBE.ui8;  for(var i=0;i<4;i++) a[i]=buff[p+  i];  return UTIF._binBE.fl32[0];  },\n\treadDouble : function(buff, p) {  var a=UTIF._binBE.ui8;  for(var i=0;i<8;i++) a[i]=buff[p+  i];  return UTIF._binBE.fl64[0];  }\n}\nUTIF._copyTile = function(tb, tw, th, b, w, h, xoff, yoff)\n{\n\t//log(\"copyTile\", tw, th,  w, h, xoff, yoff);\n\tvar xlim = Math.min(tw, w-xoff);\n\tvar ylim = Math.min(th, h-yoff);\n\tfor(var y=0; y<ylim; y++)\n\t{\n\t\tvar tof = (yoff+y)*w+xoff;\n\t\tvar sof = y*tw;\n\t\tfor(var x=0; x<xlim; x++) b[tof+x] = tb[sof+x];\n\t}\n}\n\nUTIF.LosslessJpegDecode = (function(){function t(Z){this.w=Z;this.N=0;this._=0;this.G=0}t.prototype={t:function(Z){this.N=Math.max(0,Math.min(this.w.length,Z))},i:function(){return this.w[this.N++]},l:function(){var Z=this.N;\nthis.N+=2;return this.w[Z]<<8|this.w[Z+1]},J:function(){if(this._==0){this.G=this.w[this.N];this.N+=1+(this.G+1>>>8);\nthis._=8}return this.G>>>--this._&1},Z:function(Z){var X=this._,s=this.G,E=Math.min(X,Z);Z-=E;X-=E;var Y=s>>>X&(1<<E)-1;\nwhile(Z>0){s=this.w[this.N];this.N+=1+(s+1>>>8);E=Math.min(8,Z);Z-=E;X=8-E;Y<<=E;Y|=s>>>X&(1<<E)-1}this._=X;\nthis.G=s;return Y}};var i={};i.X=function(){return[0,0,-1]};i.s=function(Z,X,s){Z[i.Y(Z,0,s)+2]=X};i.Y=function(Z,X,s){if(Z[X+2]!=-1)return 0;\nif(s==0)return X;for(var E=0;E<2;E++){if(Z[X+E]==0){Z[X+E]=Z.length;Z.push(0);Z.push(0);Z.push(-1)}var Y=i.Y(Z,Z[X+E],s-1);\nif(Y!=0)return Y}return 0};i.B=function(Z,X){var s=0,E=0,Y=0,B=X._,$=X.G,e=X.N;while(!0){if(B==0){$=X.w[e];\ne+=1+($+1>>>8);B=8}Y=$>>>--B&1;s=Z[s+Y];E=Z[s+2];if(E!=-1){X._=B;X.G=$;X.N=e;return E}}return-1};function l(Z){this.z=new t(Z);\nthis.D(this.z)}l.prototype={$:function(Z,X){this.Q=Z.i();this.F=Z.l();this.o=Z.l();var s=this.O=Z.i();\nthis.L=[];for(var E=0;E<s;E++){var Y=Z.i(),B=Z.i();Z.i();this.L[Y]=E}Z.t(Z.N+X-(6+s*3))},e:function(){var Z=0,X=this.z.i();\nif(this.H==null)this.H={};var s=this.H[X]=i.X(),E=[];for(var Y=0;Y<16;Y++){E[Y]=this.z.i();Z+=E[Y]}for(var Y=0;\nY<16;Y++)for(var B=0;B<E[Y];B++)i.s(s,this.z.i(),Y+1);return Z+17},W:function(Z){while(Z>0)Z-=this.e()},p:function(Z,X){var s=Z.i();\nif(!this.U){this.U=[]}for(var E=0;E<s;E++){var Y=Z.i(),B=Z.i();this.U[this.L[Y]]=this.H[B>>>4]}this.g=Z.i();\nZ.t(Z.N+X-(2+s*2))},D:function(Z){var X=!1,s=Z.l();if(s!==l.q)return;do{var s=Z.l(),E=Z.l()-2;switch(s){case l.m:this.$(Z,E);\nbreak;case l.K:this.W(E);break;case l.V:this.p(Z,E);X=!0;break;default:Z.t(Z.N+E);break}}while(!X)},I:function(Z,X){var s=i.B(X,Z);\nif(s==16)return-32768;var E=Z.Z(s);if((E&1<<s-1)==0)E-=(1<<s)-1;return E},B:function(Z,X){var s=this.z,E=this.O,Y=this.F,B=this.I,$=this.g,e=this.o*E,W=this.U;\nfor(var p=0;p<E;p++){Z[p]=B(s,W[p])+(1<<this.Q-1)}for(var D=E;D<e;D+=E){for(var p=0;p<E;p++)Z[D+p]=B(s,W[p])+Z[D+p-E]}var I=X;\nfor(var m=1;m<Y;m++){for(var p=0;p<E;p++){Z[I+p]=B(s,W[p])+Z[I+p-X]}for(var D=E;D<e;D+=E){for(var p=0;\np<E;p++){var K=I+D+p,q=Z[K-E];if($==6)q=Z[K-X]+(q-Z[K-E-X]>>>1);Z[K]=q+B(s,W[p])}}I+=X}}};l.m=65475;\nl.K=65476;l.q=65496;l.V=65498;function J(Z){var X=new l(Z),s=X.Q>8?Uint16Array:Uint8Array,E=new s(X.o*X.F*X.O),Y=X.o*X.O;\nX.B(E,Y);return E}return J}())\n\n\n\n\n})(UTIF, pako);\n})();"]},"metadata":{},"sourceType":"script"}